<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>超英电影预热项目 | 雨凡技术栈</title>
    <meta name="description" content="一个前端菜鸟的踩坑之路">
    
    
    <link rel="preload" href="/yufanBlog/assets/css/0.styles.6cd1c111.css" as="style"><link rel="preload" href="/yufanBlog/assets/js/app.eb102ded.js" as="script"><link rel="preload" href="/yufanBlog/assets/js/2.4f286d14.js" as="script"><link rel="preload" href="/yufanBlog/assets/js/34.89958bce.js" as="script"><link rel="preload" href="/yufanBlog/assets/js/4.143f6645.js" as="script"><link rel="preload" href="/yufanBlog/assets/js/5.42853010.js" as="script"><link rel="prefetch" href="/yufanBlog/assets/js/10.f5cd79e5.js"><link rel="prefetch" href="/yufanBlog/assets/js/100.e77f5a47.js"><link rel="prefetch" href="/yufanBlog/assets/js/101.f4efa762.js"><link rel="prefetch" href="/yufanBlog/assets/js/102.534b0c20.js"><link rel="prefetch" href="/yufanBlog/assets/js/103.6f6881ac.js"><link rel="prefetch" href="/yufanBlog/assets/js/104.91cdfa20.js"><link rel="prefetch" href="/yufanBlog/assets/js/105.743b41ac.js"><link rel="prefetch" href="/yufanBlog/assets/js/106.864183f2.js"><link rel="prefetch" href="/yufanBlog/assets/js/107.ac877875.js"><link rel="prefetch" href="/yufanBlog/assets/js/108.9b72c29f.js"><link rel="prefetch" href="/yufanBlog/assets/js/109.d1d5fe5f.js"><link rel="prefetch" href="/yufanBlog/assets/js/11.5cc65bb9.js"><link rel="prefetch" href="/yufanBlog/assets/js/110.bc34c32b.js"><link rel="prefetch" href="/yufanBlog/assets/js/111.abd8baf2.js"><link rel="prefetch" href="/yufanBlog/assets/js/112.6ff1cc57.js"><link rel="prefetch" href="/yufanBlog/assets/js/113.b7fac69c.js"><link rel="prefetch" href="/yufanBlog/assets/js/114.82875627.js"><link rel="prefetch" href="/yufanBlog/assets/js/115.f270eeef.js"><link rel="prefetch" href="/yufanBlog/assets/js/116.b403d897.js"><link rel="prefetch" href="/yufanBlog/assets/js/117.e17bae4e.js"><link rel="prefetch" href="/yufanBlog/assets/js/118.d7a885fe.js"><link rel="prefetch" href="/yufanBlog/assets/js/119.1b22a40b.js"><link rel="prefetch" href="/yufanBlog/assets/js/12.0a513196.js"><link rel="prefetch" href="/yufanBlog/assets/js/120.da572f7c.js"><link rel="prefetch" href="/yufanBlog/assets/js/121.31258026.js"><link rel="prefetch" href="/yufanBlog/assets/js/122.1e728b8c.js"><link rel="prefetch" href="/yufanBlog/assets/js/123.ed863cc5.js"><link rel="prefetch" href="/yufanBlog/assets/js/124.679b1d68.js"><link rel="prefetch" href="/yufanBlog/assets/js/125.10ea0921.js"><link rel="prefetch" href="/yufanBlog/assets/js/126.b58382a6.js"><link rel="prefetch" href="/yufanBlog/assets/js/127.ef5b78f7.js"><link rel="prefetch" href="/yufanBlog/assets/js/128.471cd7f6.js"><link rel="prefetch" href="/yufanBlog/assets/js/129.7673a0ab.js"><link rel="prefetch" href="/yufanBlog/assets/js/13.c0f6efac.js"><link rel="prefetch" href="/yufanBlog/assets/js/130.9dd7e1f6.js"><link rel="prefetch" href="/yufanBlog/assets/js/131.3e4236e7.js"><link rel="prefetch" href="/yufanBlog/assets/js/132.27c40584.js"><link rel="prefetch" href="/yufanBlog/assets/js/133.1190a972.js"><link rel="prefetch" href="/yufanBlog/assets/js/134.2c6d93f3.js"><link rel="prefetch" href="/yufanBlog/assets/js/135.6629c837.js"><link rel="prefetch" href="/yufanBlog/assets/js/136.e21c427f.js"><link rel="prefetch" href="/yufanBlog/assets/js/137.18af6654.js"><link rel="prefetch" href="/yufanBlog/assets/js/138.b141eee7.js"><link rel="prefetch" href="/yufanBlog/assets/js/139.d514e416.js"><link rel="prefetch" href="/yufanBlog/assets/js/14.2b95a788.js"><link rel="prefetch" href="/yufanBlog/assets/js/15.89183b6c.js"><link rel="prefetch" href="/yufanBlog/assets/js/16.d3ff3267.js"><link rel="prefetch" href="/yufanBlog/assets/js/17.05d47961.js"><link rel="prefetch" href="/yufanBlog/assets/js/18.558f32c2.js"><link rel="prefetch" href="/yufanBlog/assets/js/19.f3b23523.js"><link rel="prefetch" href="/yufanBlog/assets/js/20.2cadd15f.js"><link rel="prefetch" href="/yufanBlog/assets/js/21.bf7348e7.js"><link rel="prefetch" href="/yufanBlog/assets/js/22.0cf37977.js"><link rel="prefetch" href="/yufanBlog/assets/js/23.6d30b53f.js"><link rel="prefetch" href="/yufanBlog/assets/js/24.b30f5833.js"><link rel="prefetch" href="/yufanBlog/assets/js/25.e3829d3e.js"><link rel="prefetch" href="/yufanBlog/assets/js/26.867cb5a7.js"><link rel="prefetch" href="/yufanBlog/assets/js/27.607071f4.js"><link rel="prefetch" href="/yufanBlog/assets/js/28.e2359d47.js"><link rel="prefetch" href="/yufanBlog/assets/js/29.c585e2eb.js"><link rel="prefetch" href="/yufanBlog/assets/js/3.a0554e34.js"><link rel="prefetch" href="/yufanBlog/assets/js/30.e03dfa32.js"><link rel="prefetch" href="/yufanBlog/assets/js/31.145debe5.js"><link rel="prefetch" href="/yufanBlog/assets/js/32.8078cd61.js"><link rel="prefetch" href="/yufanBlog/assets/js/33.ec130daa.js"><link rel="prefetch" href="/yufanBlog/assets/js/35.07e4a52a.js"><link rel="prefetch" href="/yufanBlog/assets/js/36.48483935.js"><link rel="prefetch" href="/yufanBlog/assets/js/37.f5da11a4.js"><link rel="prefetch" href="/yufanBlog/assets/js/38.cf066428.js"><link rel="prefetch" href="/yufanBlog/assets/js/39.20c86fda.js"><link rel="prefetch" href="/yufanBlog/assets/js/40.cf94f582.js"><link rel="prefetch" href="/yufanBlog/assets/js/41.24c17c00.js"><link rel="prefetch" href="/yufanBlog/assets/js/42.aa8cd6d6.js"><link rel="prefetch" href="/yufanBlog/assets/js/43.d4fa5ba3.js"><link rel="prefetch" href="/yufanBlog/assets/js/44.798728ab.js"><link rel="prefetch" href="/yufanBlog/assets/js/45.ea514fb7.js"><link rel="prefetch" href="/yufanBlog/assets/js/46.c98e4fba.js"><link rel="prefetch" href="/yufanBlog/assets/js/47.cda2dd45.js"><link rel="prefetch" href="/yufanBlog/assets/js/48.2edfa457.js"><link rel="prefetch" href="/yufanBlog/assets/js/49.5382be88.js"><link rel="prefetch" href="/yufanBlog/assets/js/50.b5531369.js"><link rel="prefetch" href="/yufanBlog/assets/js/51.aefda9e2.js"><link rel="prefetch" href="/yufanBlog/assets/js/52.fbe47fe2.js"><link rel="prefetch" href="/yufanBlog/assets/js/53.13766011.js"><link rel="prefetch" href="/yufanBlog/assets/js/54.2d53e958.js"><link rel="prefetch" href="/yufanBlog/assets/js/55.a84168fd.js"><link rel="prefetch" href="/yufanBlog/assets/js/56.bf8b3cf9.js"><link rel="prefetch" href="/yufanBlog/assets/js/57.25e13206.js"><link rel="prefetch" href="/yufanBlog/assets/js/58.7d220142.js"><link rel="prefetch" href="/yufanBlog/assets/js/59.a9c4c6e0.js"><link rel="prefetch" href="/yufanBlog/assets/js/6.7173eaa0.js"><link rel="prefetch" href="/yufanBlog/assets/js/60.39fdf206.js"><link rel="prefetch" href="/yufanBlog/assets/js/61.a05b9ce2.js"><link rel="prefetch" href="/yufanBlog/assets/js/62.5119059f.js"><link rel="prefetch" href="/yufanBlog/assets/js/63.340c7f4b.js"><link rel="prefetch" href="/yufanBlog/assets/js/64.e639c89d.js"><link rel="prefetch" href="/yufanBlog/assets/js/65.41df2fc0.js"><link rel="prefetch" href="/yufanBlog/assets/js/66.ba24c88b.js"><link rel="prefetch" href="/yufanBlog/assets/js/67.b1ac9e59.js"><link rel="prefetch" href="/yufanBlog/assets/js/68.268a1ca1.js"><link rel="prefetch" href="/yufanBlog/assets/js/69.9fc0ba21.js"><link rel="prefetch" href="/yufanBlog/assets/js/7.cf718883.js"><link rel="prefetch" href="/yufanBlog/assets/js/70.b1f3dbbe.js"><link rel="prefetch" href="/yufanBlog/assets/js/71.34be8733.js"><link rel="prefetch" href="/yufanBlog/assets/js/72.3fbd287c.js"><link rel="prefetch" href="/yufanBlog/assets/js/73.3ab3e2b4.js"><link rel="prefetch" href="/yufanBlog/assets/js/74.155f262f.js"><link rel="prefetch" href="/yufanBlog/assets/js/75.cf1976b3.js"><link rel="prefetch" href="/yufanBlog/assets/js/76.cd6e854e.js"><link rel="prefetch" href="/yufanBlog/assets/js/77.069c75d2.js"><link rel="prefetch" href="/yufanBlog/assets/js/78.036b7513.js"><link rel="prefetch" href="/yufanBlog/assets/js/79.300a1eb1.js"><link rel="prefetch" href="/yufanBlog/assets/js/8.6c2ae40b.js"><link rel="prefetch" href="/yufanBlog/assets/js/80.1e2a51ee.js"><link rel="prefetch" href="/yufanBlog/assets/js/81.0d9f8549.js"><link rel="prefetch" href="/yufanBlog/assets/js/82.b4555390.js"><link rel="prefetch" href="/yufanBlog/assets/js/83.6d807ef7.js"><link rel="prefetch" href="/yufanBlog/assets/js/84.cfa66829.js"><link rel="prefetch" href="/yufanBlog/assets/js/85.c92f3a43.js"><link rel="prefetch" href="/yufanBlog/assets/js/86.844636dc.js"><link rel="prefetch" href="/yufanBlog/assets/js/87.3820850e.js"><link rel="prefetch" href="/yufanBlog/assets/js/88.5bd7401a.js"><link rel="prefetch" href="/yufanBlog/assets/js/89.1594041a.js"><link rel="prefetch" href="/yufanBlog/assets/js/9.f10badbd.js"><link rel="prefetch" href="/yufanBlog/assets/js/90.49bc614c.js"><link rel="prefetch" href="/yufanBlog/assets/js/91.ed04ac09.js"><link rel="prefetch" href="/yufanBlog/assets/js/92.f32be847.js"><link rel="prefetch" href="/yufanBlog/assets/js/93.a03c8cf7.js"><link rel="prefetch" href="/yufanBlog/assets/js/94.67f7bc30.js"><link rel="prefetch" href="/yufanBlog/assets/js/95.1919170d.js"><link rel="prefetch" href="/yufanBlog/assets/js/96.4b53bcdf.js"><link rel="prefetch" href="/yufanBlog/assets/js/97.28307cb3.js"><link rel="prefetch" href="/yufanBlog/assets/js/98.5a2a8596.js"><link rel="prefetch" href="/yufanBlog/assets/js/99.6b1cc404.js">
    <link rel="stylesheet" href="/yufanBlog/assets/css/0.styles.6cd1c111.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/yufanBlog/" class="home-link router-link-active"><!----> <span class="site-name">雨凡技术栈</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Javasctipt</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>ECMAScript6</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Javasctipt/ECMAScript6/let和const命令.html" class="nav-link">ES6学习</a></li></ul></li><li class="dropdown-item"><h4>TypeScript</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Javasctipt/TypeScript/什么是TypeScript.html" class="nav-link">TypeScript入门</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Angular</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础篇</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Angular/Basic/创建应用/" class="nav-link">构建应用</a></li></ul></li><li class="dropdown-item"><h4>实战篇</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Angular/AngularAction/tourismTodo/旅游清单项目/" class="nav-link">旅游清单项目</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础篇</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Basic/Introduce/vue介绍.html" class="nav-link">vue介绍</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Basic/BasicGrammar/" class="nav-link">基础语法</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Basic/Computed/" class="nav-link">计算属性</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Basic/FormModel/" class="nav-link">表单与v-model</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Basic/Component/" class="nav-link">组件</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Basic/CustomInstruction/" class="nav-link">自定义指令</a></li></ul></li><li class="dropdown-item"><h4>进阶篇</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Advance/RenderFaction/" class="nav-link">Render函数</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Advance/WebPack/WebPack基础使用方式.html" class="nav-link">webpack</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Advance/VueRouter/" class="nav-link">Vue-router</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Advance/Vuex/" class="nav-link">Vuex</a></li></ul></li><li class="dropdown-item"><h4>实战</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Vue/VueAction/gushop/硅谷外卖day01/" class="nav-link">硅谷外卖</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/VueAction/JFCitySelector/" class="nav-link">仿美团项目</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/VueAction/proProcess/vue-cli3项目创建-配置-发布/" class="nav-link">项目总结</a></li></ul></li><li class="dropdown-item"><h4>Vue踩坑</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Vue/VuePit/" class="nav-link">踩坑</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">珠峰架构学习笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>预习资料</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Zhufeng/Prepare/01-Async.html" class="nav-link">预习资料</a></li></ul></li><li class="dropdown-item"><h4>javascript高级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Zhufeng/Es6/1_Async.html" class="nav-link">手写Promise</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">混合开发</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Dcloud</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/HybridApp/Dclound/uni-app/初识uni-app/" class="nav-link">uni-app</a></li><li class="dropdown-subitem"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目/" class="nav-link">Dcloud实战</a></li><li class="dropdown-subitem"><a href="/yufanBlog/HybridApp/Dclound/DcloudPit/" class="nav-link">Dcloud踩坑</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他综合</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>开发环境</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Others/devEnvironment/nvmnrm/" class="nav-link">nvm/nrm</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Others/devEnvironment/nodejs/" class="nav-link">nodeJs</a></li></ul></li><li class="dropdown-item"><h4>开发工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Others/devTool/VScode/" class="nav-link">VScode</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Others/devTool/WebStorm/" class="nav-link">WebStorm</a></li></ul></li><li class="dropdown-item"><h4>博客</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Others/Blog/Hexo/" class="nav-link">hexo</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Others/Blog/VuePress/vuepress基础搭建/" class="nav-link">VuePress</a></li></ul></li><li class="dropdown-item"><h4>模拟数据</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Others/analogData/mock/easy-mock本地部署过程/" class="nav-link">mockjs</a></li></ul></li><li class="dropdown-item"><h4>git相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Others/Git/git基础.html" class="nav-link">git学习</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>关于我</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/About/SelfIntroduction/" class="nav-link">个人介绍</a></li></ul></li><li class="dropdown-item"><h4>个人简历</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/About/CurriculumVitae/" class="nav-link">简历</a></li></ul></li></ul></div></div> <a href="https://github.com/ynzy/yufanBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Javasctipt</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>ECMAScript6</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Javasctipt/ECMAScript6/let和const命令.html" class="nav-link">ES6学习</a></li></ul></li><li class="dropdown-item"><h4>TypeScript</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Javasctipt/TypeScript/什么是TypeScript.html" class="nav-link">TypeScript入门</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Angular</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础篇</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Angular/Basic/创建应用/" class="nav-link">构建应用</a></li></ul></li><li class="dropdown-item"><h4>实战篇</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Angular/AngularAction/tourismTodo/旅游清单项目/" class="nav-link">旅游清单项目</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础篇</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Basic/Introduce/vue介绍.html" class="nav-link">vue介绍</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Basic/BasicGrammar/" class="nav-link">基础语法</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Basic/Computed/" class="nav-link">计算属性</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Basic/FormModel/" class="nav-link">表单与v-model</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Basic/Component/" class="nav-link">组件</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Basic/CustomInstruction/" class="nav-link">自定义指令</a></li></ul></li><li class="dropdown-item"><h4>进阶篇</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Advance/RenderFaction/" class="nav-link">Render函数</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Advance/WebPack/WebPack基础使用方式.html" class="nav-link">webpack</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Advance/VueRouter/" class="nav-link">Vue-router</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/Advance/Vuex/" class="nav-link">Vuex</a></li></ul></li><li class="dropdown-item"><h4>实战</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Vue/VueAction/gushop/硅谷外卖day01/" class="nav-link">硅谷外卖</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/VueAction/JFCitySelector/" class="nav-link">仿美团项目</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Vue/VueAction/proProcess/vue-cli3项目创建-配置-发布/" class="nav-link">项目总结</a></li></ul></li><li class="dropdown-item"><h4>Vue踩坑</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Vue/VuePit/" class="nav-link">踩坑</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">珠峰架构学习笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>预习资料</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Zhufeng/Prepare/01-Async.html" class="nav-link">预习资料</a></li></ul></li><li class="dropdown-item"><h4>javascript高级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Zhufeng/Es6/1_Async.html" class="nav-link">手写Promise</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">混合开发</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Dcloud</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/HybridApp/Dclound/uni-app/初识uni-app/" class="nav-link">uni-app</a></li><li class="dropdown-subitem"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目/" class="nav-link">Dcloud实战</a></li><li class="dropdown-subitem"><a href="/yufanBlog/HybridApp/Dclound/DcloudPit/" class="nav-link">Dcloud踩坑</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他综合</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>开发环境</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Others/devEnvironment/nvmnrm/" class="nav-link">nvm/nrm</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Others/devEnvironment/nodejs/" class="nav-link">nodeJs</a></li></ul></li><li class="dropdown-item"><h4>开发工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Others/devTool/VScode/" class="nav-link">VScode</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Others/devTool/WebStorm/" class="nav-link">WebStorm</a></li></ul></li><li class="dropdown-item"><h4>博客</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Others/Blog/Hexo/" class="nav-link">hexo</a></li><li class="dropdown-subitem"><a href="/yufanBlog/Others/Blog/VuePress/vuepress基础搭建/" class="nav-link">VuePress</a></li></ul></li><li class="dropdown-item"><h4>模拟数据</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Others/analogData/mock/easy-mock本地部署过程/" class="nav-link">mockjs</a></li></ul></li><li class="dropdown-item"><h4>git相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/Others/Git/git基础.html" class="nav-link">git学习</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>关于我</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/About/SelfIntroduction/" class="nav-link">个人介绍</a></li></ul></li><li class="dropdown-item"><h4>个人简历</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yufanBlog/About/CurriculumVitae/" class="nav-link">简历</a></li></ul></li></ul></div></div> <a href="https://github.com/ynzy/yufanBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>项目实战</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html" class="active sidebar-link">超英电影预热项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#底部导航栏tabbar配置" class="sidebar-link">底部导航栏tabBar配置</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#移动端关闭导航栏" class="sidebar-link">移动端关闭导航栏</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#轮播图组件swiper" class="sidebar-link">轮播图组件swiper</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#uni-request发起网络请求" class="sidebar-link">uni.request发起网络请求</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#提取请求服务器地址" class="sidebar-link">提取请求服务器地址</a></li></ul></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#小程序真机调试" class="sidebar-link">小程序真机调试</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#滚动视图组件-scroll-view" class="sidebar-link">滚动视图组件(scroll-view)</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#开发组件" class="sidebar-link">开发组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#开发标题组件" class="sidebar-link">开发标题组件</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#开发星星组件" class="sidebar-link">开发星星组件</a></li></ul></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#媒体组件video" class="sidebar-link">媒体组件video</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#界面-动画" class="sidebar-link">界面-动画</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#点赞动画" class="sidebar-link">点赞动画</a></li></ul></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#下拉刷新" class="sidebar-link">下拉刷新</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#上拉加载" class="sidebar-link">上拉加载</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#页面跳转" class="sidebar-link">页面跳转</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#修改导航栏属性" class="sidebar-link">修改导航栏属性</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#自定义导航栏按钮" class="sidebar-link">自定义导航栏按钮</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#图片预览功能uni-previewimage" class="sidebar-link">图片预览功能uni.previewImage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#多数组图片预览" class="sidebar-link">多数组图片预览</a></li></ul></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#uni-showactionsheet​显示操作菜单" class="sidebar-link">uni.showActionSheet​显示操作菜单</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#自定义图片预览效果" class="sidebar-link">自定义图片预览效果</a></li></ul></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#第三方分享接口uni-share" class="sidebar-link">第三方分享接口uni.share</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#表单组件" class="sidebar-link">表单组件</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#数据缓存" class="sidebar-link">数据缓存</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#登录-注册" class="sidebar-link">登录/注册</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#vue原型挂载判断登录信息方法" class="sidebar-link">vue原型挂载判断登录信息方法</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#第三方登录" class="sidebar-link">第三方登录</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#我的页面获取登录信息" class="sidebar-link">我的页面获取登录信息</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#个人中心页面设置退出登录" class="sidebar-link">个人中心页面设置退出登录</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#上传功能uni-uploadfile" class="sidebar-link">上传功能uni.uploadFile</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#自定义图片裁剪上传功能" class="sidebar-link">自定义图片裁剪上传功能</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#选择器" class="sidebar-link">选择器</a></li><li class="sidebar-sub-header"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/超英电影预热项目.html#单项选择器radio-group" class="sidebar-link">单项选择器radio-group</a></li></ul></li><li><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/新项目.html" class="sidebar-link">新项目</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="超英电影预热项目"><a href="#超英电影预热项目" aria-hidden="true" class="header-anchor">#</a> 超英电影预热项目</h1> <h2 id="底部导航栏tabbar配置"><a href="#底部导航栏tabbar配置" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/collocation/pages?id=tabbar" target="_blank" rel="noopener noreferrer">底部导航栏tabBar配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <ul><li>tabBar 中的 list 是一个数组，只能配置最少2个、最多5个 tab，tab 按数组的顺序排序。</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;tabBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#bfbfbf&quot;</span><span class="token punctuation">,</span>  <span class="token comment">//tab 上的文字默认颜色</span>
    <span class="token property">&quot;selectedColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#515151&quot;</span><span class="token punctuation">,</span>  <span class="token comment">//tab 上的文字选中时的颜色</span>
    <span class="token property">&quot;borderStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">,</span>  <span class="token comment">//tabbar 上边框的颜色，仅支持 black/white</span>
    <span class="token property">&quot;backgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ffffff&quot;</span><span class="token punctuation">,</span>  <span class="token comment">//tab 的背景色</span>
    <span class="token property">&quot;list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>  <span class="token comment">//页面路径，必须在 pages 中先定义</span>
            <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;首页&quot;</span><span class="token punctuation">,</span> <span class="token comment">//tab 上按钮文字，在 5+APP 和 H5 平台为非必填。例如中间可放一个没有文字的+号图标</span>
            <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/tabBarIco/index.png&quot;</span><span class="token punctuation">,</span> <span class="token comment">//图片路径，icon 大小限制为40kb，建议尺寸为 81px * 81px，当 postion 为 top 时，此参数无效，不支持网络图片，不支持字体图标</span>
            <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/tabBarIco/index_sel.png&quot;</span> <span class="token comment">//选中时的图片路径</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/search/search&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;搜索&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/tabBarIco/search.png&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/tabBarIco/search_sel.png&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/me/me&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我的&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/tabBarIco/me.png&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/tabBarIco/me_sel.png&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="移动端关闭导航栏"><a href="#移动端关闭导航栏" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/collocation/pages?id=app-titlenview" target="_blank" rel="noopener noreferrer">移动端关闭导航栏<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <ul><li>每个页面均支持通过配置 titleNView 为 false 来禁用原生导航栏</li></ul> <div class="warning custom-block"><ul><li>如果 h5 节点没有配置，默认会使用 app-plus 下的配置。</li> <li>配置了 h5 节点，则会覆盖 app-plus 下的配置。</li></ul></div> <h2 id="轮播图组件swiper"><a href="#轮播图组件swiper" aria-hidden="true" class="header-anchor">#</a> 轮播图组件<a href="https://uniapp.dcloud.io/component/swiper" target="_blank" rel="noopener noreferrer">swiper<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <ul><li>HBuilderX快捷键，输入<code>uswper</code></li></ul> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th> <th>平台支持度</th></tr></thead> <tbody><tr><td>indicator-dots</td> <td>Boolean</td> <td>false</td> <td>是否显示面板指示点</td> <td></td></tr> <tr><td>indicator-color</td> <td>Color</td> <td>rgba(0, 0, 0, .3)</td> <td>指示点颜色</td> <td></td></tr> <tr><td>indicator-active-color</td> <td>Color</td> <td>#000000</td> <td>当前选中的指示点颜色</td> <td></td></tr> <tr><td>autoplay</td> <td>Boolean</td> <td>false</td> <td>是否自动切换</td> <td></td></tr> <tr><td>current</td> <td>Number</td> <td>0</td> <td>当前所在滑块的 index</td> <td></td></tr> <tr><td>current-item-id</td> <td>String</td> <td></td> <td>当前所在滑块的 item-id ，不能与 current 被同时指定</td> <td>微信小程序、5+App、H5、百度小程序、头条小程序</td></tr> <tr><td>interval</td> <td>Number</td> <td>5000</td> <td>自动切换时间间隔</td> <td></td></tr> <tr><td>duration</td> <td>Number</td> <td>500</td> <td>滑动动画时长</td> <td></td></tr> <tr><td>circular</td> <td>Boolean</td> <td>false</td> <td>是否采用衔接滑动</td> <td></td></tr> <tr><td>vertical</td> <td>Boolean</td> <td>false</td> <td>滑动方向是否为纵向</td> <td></td></tr> <tr><td>previous-margin</td> <td>String</td> <td>0px</td> <td>前边距，可用于露出前一项的一小部分，接受 px 和 rpx 值</td> <td>头条小程序不支持</td></tr> <tr><td>next-margin</td> <td>String</td> <td>0px</td> <td>后边距，可用于露出后一项的一小部分，接受 px 和 rpx 值</td> <td>头条小程序不支持</td></tr> <tr><td>display-multiple-items</td> <td>Number</td> <td>1</td> <td>同时显示的滑块数量</td> <td>微信小程序、5+App、H5、百度小程序、头条小程序</td></tr> <tr><td>skip-hidden-item-layout</td> <td>Boolean</td> <td>false</td> <td>是否跳过未显示的滑块布局，设为 true 可优化复杂情况下的滑动性能，但会丢失隐藏状态滑块的布局信息</td> <td>微信小程序、5+App</td></tr> <tr><td>@change</td> <td>EventHandle</td> <td></td> <td>current 改变时会触发 change 事件，event.detail = {current: current, source: source}</td> <td></td></tr> <tr><td>@animationfinish</td> <td>EventHandle</td> <td></td> <td>动画结束时会触发 animationfinish 事件，event.detail 同上</td> <td>头条小程序不支持</td></tr></tbody></table> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper</span> <span class="token attr-name">:indicator-dots</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:autoplay</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:interval</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>3000<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:duration</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1000<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>carousel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>carousel in carouselList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>carousel.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>carousel.image<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>carousel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper-item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="uni-request发起网络请求"><a href="#uni-request发起网络请求" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/api/request/request?id=request" target="_blank" rel="noopener noreferrer">uni.request发起网络请求<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <table><thead><tr><th>参数名</th> <th>类型</th> <th>必填</th> <th>默认值</th> <th>说明</th> <th>平台差异说明</th></tr></thead> <tbody><tr><td>url</td> <td>String</td> <td>是</td> <td></td> <td>开发者服务器接口地址</td> <td></td></tr> <tr><td>data</td> <td>Object/String/ArrayBuffer</td> <td>否</td> <td></td> <td>请求的参数</td> <td></td></tr> <tr><td>header</td> <td>Object</td> <td>否</td> <td></td> <td>设置请求的 header，header 中不能设置 Referer。</td> <td></td></tr> <tr><td>method</td> <td>String</td> <td>否</td> <td>GET</td> <td>有效值详见下方说明</td> <td></td></tr> <tr><td>dataType</td> <td>String</td> <td>否</td> <td>json</td> <td>如果设为 json，会尝试对返回的数据做一次 JSON.parse</td> <td></td></tr> <tr><td>responseType</td> <td>String</td> <td>否</td> <td>text</td> <td>设置响应的数据类型。合法值：text、arraybuffer</td> <td>支付宝小程序不支持</td></tr> <tr><td>success</td> <td>Function</td> <td>否</td> <td></td> <td>收到开发者服务成功返回的回调函数</td> <td></td></tr> <tr><td>fail</td> <td>Function</td> <td>否</td> <td></td> <td>接口调用失败的回调函数</td> <td></td></tr> <tr><td>complete</td> <td>Function</td> <td>否</td> <td></td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td> <td></td></tr></tbody></table> <h4 id="示例"><a href="#示例" aria-hidden="true" class="header-anchor">#</a> 示例</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token punctuation">:</span> <span class="token string">'https://www.example.com/request'</span><span class="token punctuation">,</span> <span class="token comment">//仅为示例，并非真实接口地址。</span>
    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        text<span class="token punctuation">:</span> <span class="token string">'uni.request'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    header<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">'custom-header'</span><span class="token punctuation">:</span> <span class="token string">'hello'</span> <span class="token comment">//自定义请求头信息</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'request success'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="提取请求服务器地址"><a href="#提取请求服务器地址" aria-hidden="true" class="header-anchor">#</a> 提取请求服务器地址</h3> <ol><li>单独import导入js公共文件</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//common/common.js</span>

<span class="token keyword">const</span> serverUrl <span class="token operator">=</span> <span class="token string">&quot;https://www.imovietrailer.com/superhero&quot;</span><span class="token punctuation">;</span> <span class="token comment">//生产环境</span>
<span class="token comment">// const serverUrl = &quot;https://www.imovietrailer-dev.com/superhero&quot;;		// 开发环境</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	serverUrl
<span class="token punctuation">}</span>

<span class="token comment">//pages/index/index.vue</span>

 <span class="token keyword">import</span> common <span class="token keyword">from</span> <span class="token string">&quot;../../common/common.js&quot;</span>
<span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取common.js中的服务器地址</span>
    <span class="token keyword">var</span> serverUrl <span class="token operator">=</span> common<span class="token punctuation">.</span>serverUrl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ol start="2"><li>将变量挂载到vue原型prototype上</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//main.js</span>

<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>serverUrl <span class="token operator">=</span> <span class="token string">&quot;https://www.imovietrailer.com/superhero&quot;</span><span class="token punctuation">;</span>			<span class="token comment">// 生产环境</span>
<span class="token comment">// Vue.prototype.serverUrl = &quot;https://www.imovietrailer-dev.com/superhero&quot;;		// 开发环境</span>

<span class="token comment">////pages/index/index.vue</span>

<span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 通过挂载到main.js中获取服务器的地址，作为全局变量</span>
	<span class="token keyword">var</span> serverUrl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>serverUrl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="小程序真机调试"><a href="#小程序真机调试" aria-hidden="true" class="header-anchor">#</a> 小程序真机调试</h2> <h5 id="小程序真机调试需要配置appid，请求服务器需要在小程序平台开发中配置服务器域名"><a href="#小程序真机调试需要配置appid，请求服务器需要在小程序平台开发中配置服务器域名" aria-hidden="true" class="header-anchor">#</a> 小程序真机调试需要配置AppID，请求服务器需要在小程序平台开发中配置服务器域名</h5> <ol><li>配置appid
<ul><li>进入小程序公众平台 -&gt; 左侧开发选项 -&gt; 开发设置 -&gt; 开发者ID</li></ul></li> <li>配置服务器域名
<ul><li>进入小程序公众平台 -&gt; 左侧开发选项 -&gt; 开发设置 -&gt; 服务器域名</li></ul></li> <li>配置开发者工具
<ul><li>进入微信开发者工具 -&gt; 菜单项最右侧详情 -&gt; 修改appid</li></ul></li></ol> <h2 id="滚动视图组件-scroll-view"><a href="#滚动视图组件-scroll-view" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/component/scroll-view" target="_blank" rel="noopener noreferrer">滚动视图组件(scroll-view)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th> <th>平台支持</th></tr></thead> <tbody><tr><td>scroll-x</td> <td>Boolean</td> <td>false</td> <td>允许横向滚动</td> <td></td></tr> <tr><td>scroll-y</td> <td>Boolean</td> <td>false</td> <td>允许纵向滚动</td> <td></td></tr> <tr><td>upper-threshold</td> <td>Number</td> <td>50</td> <td>距顶部/左边多远时（单位px），触发 scrolltoupper 事件</td> <td></td></tr> <tr><td>lower-threshold</td> <td>Number</td> <td>50</td> <td>距底部/右边多远时（单位px），触发 scrolltolower 事件</td> <td></td></tr> <tr><td>scroll-top</td> <td>Number</td> <td></td> <td>设置竖向滚动条位置</td> <td></td></tr> <tr><td>scroll-left</td> <td>Number</td> <td></td> <td>设置横向滚动条位置</td> <td></td></tr> <tr><td>scroll-into-view</td> <td>String</td> <td></td> <td>值应为某子元素id（id不能以数字开头）。设置哪个方向可滚动，则在哪个方向滚动到该元素</td> <td></td></tr> <tr><td>scroll-with-animation</td> <td>Boolean</td> <td>false</td> <td>在设置滚动条位置时使用动画过渡</td> <td></td></tr> <tr><td>enable-back-to-top</td> <td>Boolean</td> <td>false</td> <td>iOS点击顶部状态栏、安卓双击标题栏时，滚动条返回顶部，只支持竖向</td> <td>微信小程序</td></tr> <tr><td>@scrolltoupper</td> <td>EventHandle</td> <td></td> <td>滚动到顶部/左边，会触发 scrolltoupper 事件</td> <td></td></tr> <tr><td>@scrolltolower</td> <td>EventHandle</td> <td></td> <td>滚动到底部/右边，会触发 scrolltolower 事件</td> <td></td></tr> <tr><td>@scroll</td> <td>EventHandle</td> <td></td> <td>滚动时触发，event.detail = {scrollLeft, scrollTop, scrollHeight, scrollWidth, deltaX, deltaY}</td> <td></td></tr></tbody></table> <ul><li>使用竖向滚动时，需要给 <code>&lt;scroll-view&gt;</code>一个固定高度，通过 css 设置 height。</li> <li>HBuilderX快捷键，输入<code>uScrollView</code></li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-x</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page-block hot<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>single-poster<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>superhero in hotSuperheroList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>superhero.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>poster-warpper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>superhero.cover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>poster<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>movie-name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{superhero.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>movie-score-warpper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../../static/icos/star-yellow.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>start-ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="开发组件"><a href="#开发组件" aria-hidden="true" class="header-anchor">#</a> 开发组件</h2> <ul><li>支持<a href="https://cn.vuejs.org/v2/guide/components.html" target="_blank" rel="noopener noreferrer">vue组件开发<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>父子组件通过props传输数据</li></ul> <h3 id="开发标题组件"><a href="#开发标题组件" aria-hidden="true" class="header-anchor">#</a> 开发标题组件</h3> <ul><li>用于显示标题和标题图标</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- titleBar.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>titleBar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page-block super-hot<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hot-title-warpper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hot-ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hot-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	name<span class="token punctuation">:</span> <span class="token string">'titleBar'</span><span class="token punctuation">,</span>
	props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		title<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
		icon<span class="token punctuation">:</span> <span class="token string">''</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 调用 --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>titleBar</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>meuntitle[2].title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:icon</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>meuntitle[2].icon<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 组件中的静态资源路径要与使用组件位置为准 --&gt;</span>
meuntitle: [
  {
  	title: '热门超英',
  	icon: '../../static/icos/hot.png'
  },
  {
  	title: '热门预告',
  	icon: '../../static/icos/interest.png'
  },
  {
  	title: '猜你喜欢',
  	icon: '../../static/icos/guess-u-like.png'
  }
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h3 id="开发星星组件"><a href="#开发星星组件" aria-hidden="true" class="header-anchor">#</a> 开发星星组件</h3> <ul><li>根据评论分数，动态计算星星数量</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- trailerStars.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>trailerStars<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 定义组件名称 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>movie-score-warpper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
				<span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(yellow, index) in yelloScore<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
				<span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../../static/icos/star-yellow.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>start-ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
				<span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(gray, itemindex) in grayScore<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>itemindex<span class="token punctuation">&quot;</span></span>
				<span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../../static/icos/star-gray.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>start-ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>movie-score<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>showNum == 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				{{innerScore}}
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	name<span class="token punctuation">:</span> <span class="token string">'trailerStars'</span><span class="token punctuation">,</span> <span class="token comment">//定义组件名称</span>
	<span class="token comment">//定义组件内部使用的属性</span>
	props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		<span class="token comment">//自定义一个变量，用于接受父组件（首页或者其他页面）传入的参数值</span>
		innerScore<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 定义外部传入的分数</span>
		showNum<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token comment">// 是否需要显示具体的分数  1：显示  0：不显示</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span>
			yelloScore<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//黄色星星</span>
			grayScore<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment">//灰色星星</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> tempScore <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
		<span class="token comment">//判断传入的值是否为空</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>innerScore <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerScore <span class="token operator">!=</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerScore <span class="token operator">!=</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			tempScore <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerScore<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//计算星星的数量,并绑定到data数据中</span>
		<span class="token keyword">var</span> yelloScore <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>tempScore <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//黄星</span>
		<span class="token keyword">var</span> grayScore <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">-</span> yelloScore<span class="token punctuation">;</span>  <span class="token comment">//灰星</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>yelloScore <span class="token operator">=</span> yelloScore<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>grayScore <span class="token operator">=</span> grayScore<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 调用组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trailerStars</span> <span class="token attr-name">:innerScore</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>guess.score<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:showNum</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h2 id="媒体组件video"><a href="#媒体组件video" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/component/video" target="_blank" rel="noopener noreferrer">媒体组件video<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <ul><li>常用属性</li></ul> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th> <th>平台差异说明</th></tr></thead> <tbody><tr><td>src</td> <td>String</td> <td></td> <td>要播放视频的资源地址</td> <td></td></tr> <tr><td>autoplay</td> <td>Boolean</td> <td>false</td> <td>是否自动播放</td> <td></td></tr> <tr><td>loop</td> <td>Boolean</td> <td>false</td> <td>是否循环播放</td> <td>头条小程序不支持</td></tr> <tr><td>muted</td> <td>Boolean</td> <td>false</td> <td>是否静音播放</td> <td>头条小程序不支持</td></tr> <tr><td>duration</td> <td>Number</td> <td></td> <td>指定视频时长，单位为秒（s）。</td> <td>头条小程序不支持</td></tr> <tr><td>controls</td> <td>Boolean</td> <td>true</td> <td>是否显示默认播放控件（播放/暂停按钮、播放进度、时间）</td> <td>头条小程序不支持</td></tr> <tr><td>page-gesture</td> <td>Boolean</td> <td>false</td> <td>在非全屏模式下，是否开启亮度与音量调节手势</td> <td>微信小程序、H5</td></tr> <tr><td>direction</td> <td>Number</td> <td></td> <td>设置全屏时视频的方向，不指定则根据宽高比自动判断。有效值为 0（正常竖向）, 90（屏幕逆时针90度）, -90（屏幕顺时针90度）</td> <td>头条小程序不支持</td></tr> <tr><td>show-progress</td> <td>Boolean</td> <td>true</td> <td>若不设置，宽度大于240时才会显示</td> <td>头条小程序不支持</td></tr> <tr><td>show-fullscreen-btn</td> <td>Boolean</td> <td>true</td> <td>是否显示全屏按钮</td> <td>头条小程序不支持</td></tr> <tr><td>show-play-btn</td> <td>Boolean</td> <td>true</td> <td>是否显示视频底部控制栏的播放按钮</td> <td>头条小程序不支持</td></tr> <tr><td>show-center-play-btn</td> <td>Boolean</td> <td>true</td> <td>是否显示视频中间的播放按钮</td> <td>头条小程序不支持</td></tr> <tr><td>enable-progress-gesture</td> <td>Boolean</td> <td>true</td> <td>是否开启控制进度的手势</td> <td>头条小程序不支持</td></tr> <tr><td>objectFit</td> <td>String</td> <td>contain</td> <td>当视频大小与 video 容器大小不一致时，视频的表现形式。contain：包含，fill：填充，cover：覆盖</td> <td>微信小程序、H5</td></tr> <tr><td>poster</td> <td>String</td> <td></td> <td>视频封面的图片网络资源地址，如果 controls 属性值为 false 则设置 poster 无效</td> <td>头条小程序不支持</td></tr> <tr><td>@play</td> <td>EventHandle</td> <td></td> <td>当开始/继续播放时触发play事件</td> <td>头条小程序不支持</td></tr> <tr><td>@pause</td> <td>EventHandle</td> <td></td> <td>当暂停播放时触发 pause 事件</td> <td>头条小程序不支持</td></tr> <tr><td>@ended</td> <td>EventHandle</td> <td></td> <td>当播放到末尾时触发 ended 事件</td> <td>头条小程序不支持</td></tr> <tr><td>@timeupdate</td> <td>EventHandle</td> <td></td> <td>播放进度变化时触发，event.detail = {currentTime, duration} 。触发频率 250ms 一次</td> <td>头条小程序不支持</td></tr> <tr><td>@fullscreenchange</td> <td>EventHandle</td> <td></td> <td>当视频进入和退出全屏时触发，event.detail = {fullScreen, direction}，direction取为 vertical 或 horizontal</td> <td>头条小程序不支持</td></tr> <tr><td>@waiting</td> <td>EventHandle</td> <td></td> <td>视频出现缓冲时触发</td> <td>头条小程序不支持</td></tr> <tr><td>@error</td> <td>EventHandle</td> <td></td> <td>视频播放出错时触发</td> <td>头条小程序不支持</td></tr></tbody></table> <ul><li><code>&lt;video&gt;</code> 默认宽度 300px、高度 225px，可通过 css 设置宽高。</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 视频播放数据是一个数组，当点击播放一个视频时，其他视频应该停止播放，对此需要做优化 --&gt;</span>
<span class="token comment">&lt;!-- 当页面隐藏时，视频播放应该停止，对此需要做优化 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span>
<span class="token attr-name">:id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>trailer.id<span class="token punctuation">&quot;</span></span>
<span class="token attr-name">:data-playingIndex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>trailer.id<span class="token punctuation">&quot;</span></span>
<span class="token attr-name">@play</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>meIsPlaying<span class="token punctuation">&quot;</span></span>
<span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>trailer in hotTrailerList<span class="token punctuation">&quot;</span></span> 
<span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>trailer.id<span class="token punctuation">&quot;</span></span> 
<span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>trailer.trailer<span class="token punctuation">&quot;</span></span> 
<span class="token attr-name">:poster</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>trailer.poster<span class="token punctuation">&quot;</span></span> 
<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hot-movie-single<span class="token punctuation">&quot;</span></span>
<span class="token attr-name">controls</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onHide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果此时有播放，禁止视频播放</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>videoContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>videoContext<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">meIsPlaying</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//播放一个视频的时候，需要暂停其他正在播放的视频</span>
			<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> trailerId <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                trailerId <span class="token operator">=</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>playingindex<span class="token punctuation">;</span>
                <span class="token comment">//创建并返回 video 上下文 videoContext 对象</span>
				me<span class="token punctuation">.</span>videoContext <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">createVideoContext</span><span class="token punctuation">(</span>trailerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">var</span> hotTrailerList <span class="token operator">=</span> me<span class="token punctuation">.</span>hotTrailerList<span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> hotTrailerList<span class="token punctuation">.</span>length <span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> tempId <span class="token operator">=</span> hotTrailerList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span>
				<span class="token comment">//如果视屏id不等于当前播放的id，暂停他们的视频</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>tempId <span class="token operator">!=</span> trailerId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						uni<span class="token punctuation">.</span><span class="token function">createVideoContext</span><span class="token punctuation">(</span>tempId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h2 id="界面-动画"><a href="#界面-动画" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/api/ui/animation?id=createanimation" target="_blank" rel="noopener noreferrer">界面-动画<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>创建一个动画实例 animation。调用实例的方法来描述动画。最后通过动画实例的export方法导出动画数据传递给组件的animation属性。</p> <div class="warning custom-block"><p>h5不支持，需要进行条件编译</p></div> <h3 id="点赞动画"><a href="#点赞动画" aria-hidden="true" class="header-anchor">#</a> 点赞动画</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 点赞数据是遍历出来的5条数据，当点击时，所有点赞都会执行动画，所以要创建画画数组，绑定对应的索引值 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>movie-oper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:data-gIndex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gIndex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>praiseMe<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../../static/icos/praise.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>praise-ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>praise-me<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点赞<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">:animation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>animationDataArr[gIndex]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>praise-me animation-opacity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            animationData<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			animationDataArr<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onUnload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//页面卸载的时候，清除动画数据</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>animationData <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>animationDataArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token comment">// #ifdef APP-PLUS || MP-WEIXIN</span>
		<span class="token comment">// 在页面创建的时候，创建一个临时动画对象</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>animation <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">createAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// #endif</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
       	<span class="token comment">//实现点赞动画效果</span>
		<span class="token function">praiseMe</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// console.log(e)</span>
			<span class="token comment">// #ifdef APP-PLUS || MP-WEIXIN</span>
			<span class="token keyword">var</span> gIndex <span class="token operator">=</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>gindex<span class="token punctuation">;</span>

			<span class="token comment">//构建动画数据，并且通过step来表示这组动画的完成</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>animation
				<span class="token punctuation">.</span><span class="token function">translateY</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					duration<span class="token punctuation">:</span> <span class="token number">400</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//导出动画数据到view组件，实现组件的动画效果</span>
			<span class="token comment">// this.animationData = this.animation.export();</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>animationData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animation<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>animationDataArr<span class="token punctuation">[</span>gIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animationData<span class="token punctuation">.</span><span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//还原动画</span>
			<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>animation
					<span class="token punctuation">.</span><span class="token function">translateY</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
					<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
					<span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
						duration<span class="token punctuation">:</span> <span class="token number">0</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// this.animationData = this.animation.export();</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>animationData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animation<span class="token punctuation">;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>animationDataArr<span class="token punctuation">[</span>gIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animationData<span class="token punctuation">.</span><span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//#endif</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><h2 id="下拉刷新"><a href="#下拉刷新" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/api/ui/pulldown" target="_blank" rel="noopener noreferrer">下拉刷新<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <ul><li>通过配置下拉刷新选项，实现首页下拉刷新请求更新数据</li> <li>在 js 中定义 <code>onPullDownRefresh</code> 处理函数（和onLoad等生命周期函数同级），监听该页面用户下拉刷新事件。
<ul><li>需要在 <code>pages.json</code> 里，找到的当前页面的pages节点，并在 <code>style</code> 选项中开启 <code>enablePullDownRefresh</code>。</li> <li>当处理完数据刷新后，<code>uni.stopPullDownRefresh</code> 可以停止当前页面的下拉刷新。</li></ul></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;app-plus&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;titleNView&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">//禁用原生导航栏</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token property">&quot;enablePullDownRefresh&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">//开启单页面下拉刷新功能</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            guessULikeList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//页面加载时请求数据</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//监听下拉刷新</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
       <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">//加载动画</span>
			uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				title<span class="token punctuation">:</span> <span class="token string">'加载中...'</span><span class="token punctuation">,</span>
				mask<span class="token punctuation">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//导航条加载动画</span>
			uni<span class="token punctuation">.</span><span class="token function">showNavigationBarLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> serverUrl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>serverUrl<span class="token punctuation">;</span>
			<span class="token comment">// 猜你喜欢</span>
			uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				url<span class="token punctuation">:</span> serverUrl <span class="token operator">+</span> <span class="token string">'/index/guessULike'</span><span class="token punctuation">,</span>
				method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
				header<span class="token punctuation">:</span> <span class="token punctuation">{</span>
					<span class="token string">'content-type'</span><span class="token punctuation">:</span> <span class="token string">'application/x-www-form-urlencoded'</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
					qq<span class="token punctuation">:</span> <span class="token string">'466481615'</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token comment">// console.log(res.data);</span>
					<span class="token comment">// 获取真实数据之前，务必判断状态是否为200</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> guessULikeList <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span>guessULikeList <span class="token operator">=</span> guessULikeList<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function-variable function">complete</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token comment">//接口调用结束的回调函数（调用成功、失败都会执行）</span>
					uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					uni<span class="token punctuation">.</span><span class="token function">hideNavigationBarLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					uni<span class="token punctuation">.</span><span class="token function">stopPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><h2 id="上拉加载"><a href="#上拉加载" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/frame?id=%E9%A1%B5%E9%9D%A2%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" target="_blank" rel="noopener noreferrer">上拉加载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <ul><li><code>onReachBottom</code>页面上拉触底事件的处理函数</li> <li>一般用于分页数据</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
  	trailerList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  	keywords<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 搜索的关键字</span>
  	page<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 当前第几页</span>
  	pageSize<span class="token punctuation">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
  	totalPages<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token comment">// 总页数</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">onReachBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> page <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>page <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> totalPages <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>totalPages<span class="token punctuation">;</span>
  <span class="token comment">// 如果当前需要分页的分页数和总页数相等，就不分页</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>page <span class="token operator">&gt;</span> totalPages<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pagedTrailerList</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>keywords<span class="token punctuation">,</span> page<span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">pagedTrailerList</span><span class="token punctuation">(</span><span class="token parameter">keywords<span class="token punctuation">,</span> page<span class="token punctuation">,</span> pageSize</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//搜索内容列表</span>
			<span class="token keyword">var</span> serverUrl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>serverUrl<span class="token punctuation">;</span>
			<span class="token comment">// 猜你喜欢</span>
			uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				url<span class="token punctuation">:</span> serverUrl <span class="token operator">+</span> <span class="token string">'/search/list'</span><span class="token punctuation">,</span>
				method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
				header<span class="token punctuation">:</span> <span class="token punctuation">{</span>
					<span class="token string">'content-type'</span><span class="token punctuation">:</span> <span class="token string">'application/x-www-form-urlencoded'</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
					keywords<span class="token punctuation">:</span> keywords<span class="token punctuation">,</span>
					qq<span class="token punctuation">:</span> <span class="token string">'466481615'</span><span class="token punctuation">,</span>
					page<span class="token punctuation">:</span> page<span class="token punctuation">,</span>
					pageSize<span class="token punctuation">:</span> pageSize
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token comment">// console.log(res.data);</span>
					<span class="token comment">// 获取真实数据之前，务必判断状态是否为200</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> tempList <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>rows<span class="token punctuation">;</span>
						<span class="token comment">//拼接获取到的数据</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span>trailerList <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>trailerList<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>tempList<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span>totalPages <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>total<span class="token punctuation">;</span> <span class="token comment">//获取总页数</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span>page <span class="token operator">=</span> page<span class="token punctuation">;</span> <span class="token comment">//覆盖当前页面里的page</span>
						<span class="token comment">// console.log(this.trailerList)</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function-variable function">complete</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					uni<span class="token punctuation">.</span><span class="token function">hideNavigationBarLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h2 id="页面跳转"><a href="#页面跳转" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/api/router?id=navigateto" target="_blank" rel="noopener noreferrer">页面跳转<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <ul><li><a href="https://uniapp.dcloud.io/component/navigator" target="_blank" rel="noopener noreferrer">navigator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <ul><li>标签属性，相当于a标签</li></ul></li></ul> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th> <th>平台支持度</th></tr></thead> <tbody><tr><td>url</td> <td>String</td> <td></td> <td>应用内的跳转链接，值为相对路径或绝对路径，如：&quot;../first/first&quot;，&quot;/pages/first/first&quot;，注意不能加 .vue 后缀</td> <td></td></tr> <tr><td>open-type</td> <td>String</td> <td>navigate</td> <td>跳转方式</td> <td></td></tr> <tr><td>delta</td> <td>Number</td> <td></td> <td>当 open-type 为 'navigateBack' 时有效，表示回退的层数</td> <td></td></tr> <tr><td>animation-type</td> <td>String</td> <td>pop-in/out</td> <td>当 open-type 为 navigateTo、navigateBack 时有效，窗口的显示/关闭动画效果，详见：窗口动画</td> <td>5+App</td></tr> <tr><td>animation-duration</td> <td>Number</td> <td>300</td> <td>当 open-type 为 navigateTo、navigateBack 时有效，窗口显示/关闭动画的持续时间。</td> <td>5+App</td></tr> <tr><td>hover-class</td> <td>String</td> <td>navigator-hover</td> <td>指定点击时的样式类，当hover-class=&quot;none&quot;时，没有点击态效果</td> <td></td></tr> <tr><td>hover-stop-propagation</td> <td>Boolean</td> <td>false</td> <td>指定是否阻止本节点的祖先节点出现点击态</td> <td>微信小程序</td></tr> <tr><td>hover-start-time</td> <td>Number</td> <td>50</td> <td>按住后多久出现点击态，单位毫秒</td> <td></td></tr> <tr><td>hover-stay-time</td> <td>Number</td> <td>600</td> <td>手指松开后点击态保留时间，单位毫秒</td> <td></td></tr></tbody></table> <p><strong>open-type 有效值</strong></p> <table><thead><tr><th>值</th> <th>说明</th> <th>平台支持度</th></tr></thead> <tbody><tr><td>navigate</td> <td>对应 uni.navigateTo 的功能</td> <td></td></tr> <tr><td>redirect</td> <td>对应 uni.redirectTo 的功能</td> <td></td></tr> <tr><td>switchTab</td> <td>对应 uni.switchTab 的功能</td> <td></td></tr> <tr><td>reLaunch</td> <td>对应 uni.reLaunch 的功能</td> <td>头条小程序不支持</td></tr> <tr><td>navigateBack</td> <td>对应 uni.navigateBack 的功能</td> <td></td></tr></tbody></table> <div class="warning custom-block"><p><code>navigator-hover</code> 默认为 <code>{background-color: rgba(0, 0, 0, 0.1); opacity: 0.7;}</code>, <code>&lt;navigator&gt;</code> 的子节点背景色应为透明色。</p></div> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page-body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>btn-area<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>navigate/navigate?title=navigate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hover-class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>navigator-hover<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>default<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>跳转到新页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>redirect/redirect?title=redirect<span class="token punctuation">&quot;</span></span> <span class="token attr-name">redirect</span> <span class="token attr-name">hover-class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>other-navigator-hover<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>default<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>在当前页打开<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li><code>uni.navigateTo</code> <ul><li>保留当前页面，跳转到应用内的某个页面，使用uni.navigateBack可以返回到原页面。</li></ul></li></ul> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>默认值</th> <th>说明</th> <th>平台支持度</th></tr></thead> <tbody><tr><td>url</td> <td>String</td> <td>是</td> <td></td> <td>需要跳转的应用内非 tabBar 的页面的路径 , 路径后可以带参数。参数与路径之间使用?分隔，参数键与参数值用=相连，不同参数用&amp;分隔；如 'path?key=value&amp;key2=value2'，path为下一个页面的路径，下一个页面的onLoad函数可得到传递的参数</td> <td>:-</td></tr> <tr><td>animationType</td> <td>String</td> <td>否</td> <td>pop-in</td> <td>窗口显示的动画效果，详见：窗口动画</td> <td>5+App</td></tr> <tr><td>animationDuration</td> <td>Number</td> <td>否</td> <td>300</td> <td>窗口动画持续时间，单位为 ms</td> <td>5+App</td></tr> <tr><td>success</td> <td>Function</td> <td>否</td> <td></td> <td>接口调用成功的回调函数</td> <td></td></tr> <tr><td>fail</td> <td>Function</td> <td>否</td> <td></td> <td>接口调用失败的回调函数</td> <td></td></tr> <tr><td>complete</td> <td>Function</td> <td>否</td> <td></td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td> <td></td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token punctuation">:</span> <span class="token string">'test?id=1&amp;name=uniapp'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// test.vue</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">onLoad</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">option</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//option为object类型，会序列化上个页面传递的参数</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//打印出上个页面传递的参数。</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//打印出上个页面传递的参数。</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li><code>uni.switchTab</code> <ul><li>跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面。</li></ul></li></ul> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>url</td> <td>String</td> <td>是</td> <td>需要跳转的 tabBar 页面的路径（需在 pages.json 的 tabBar 字段定义的页面），路径后不能带参数</td></tr> <tr><td>success</td> <td>Function</td> <td>否</td> <td>接口调用成功的回调函数</td></tr> <tr><td>fail</td> <td>Function</td> <td>否</td> <td>接口调用失败的回调函数</td></tr> <tr><td>complete</td> <td>Function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table> <ul><li><code>uni.navigateBack</code> <ul><li>关闭当前页面，返回上一页面或多级页面。可通过 <code>getCurrentPages()</code> 获取当前的页面栈，决定需要返回几层。</li></ul></li></ul> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>默认值</th> <th>说明</th> <th>平台支持度</th></tr></thead> <tbody><tr><td>delta</td> <td>Number</td> <td>否</td> <td>1</td> <td>返回的页面数，如果 delta 大于现有页面数，则返回到首页。</td> <td></td></tr> <tr><td>animationType</td> <td>String</td> <td>否</td> <td>pop-out</td> <td>窗口关闭的动画效果，详见：窗口动画</td> <td>5+App</td></tr> <tr><td>animationDuration</td> <td>Number</td> <td>否</td> <td>300</td> <td>窗口关闭动画的持续时间，单位为 ms</td> <td>5+App</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 注意：调用 navigateTo 跳转时，调用该方法的页面会被加入堆栈，而 redirectTo 方法则不会。见下方示例代码</span>

<span class="token comment">// 此处是A页面</span>
uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token punctuation">:</span> <span class="token string">'B?id=1'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 此处是B页面</span>
uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token punctuation">:</span> <span class="token string">'C?id=1'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在C页面内 navigateBack，将返回A页面</span>
uni<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    delta<span class="token punctuation">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="warning custom-block"><ul><li>navigateTo, redirectTo 只能打开非 tabBar 页面。</li> <li>switchTab 只能打开 tabBar 页面。</li> <li>reLaunch 可以打开任意页面。</li> <li>页面底部的 tabBar 由页面决定，即只要是定义为 tabBar 的页面，底部都有 tabBar。</li> <li>不能在 App.vue 里面进行页面跳转。</li></ul></div> <h2 id="修改导航栏属性"><a href="#修改导航栏属性" aria-hidden="true" class="header-anchor">#</a> 修改导航栏属性</h2> <ol><li><a href="https://uniapp.dcloud.io/collocation/pages?id=style" target="_blank" rel="noopener noreferrer">pages.json配置导航栏<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <table><thead><tr><th>属性</th> <th>类型</th> <th>默认值</th> <th>描述</th> <th>平台差异说明</th></tr></thead> <tbody><tr><td>navigationBarBackgroundColor</td> <td>HexColor</td> <td>#000000</td> <td>导航栏背景颜色，如&quot;#000000&quot;</td> <td></td></tr> <tr><td>navigationBarTextStyle</td> <td>String</td> <td>white</td> <td>导航栏标题颜色，仅支持 black/white</td> <td></td></tr> <tr><td>navigationBarTitleText</td> <td>String</td> <td></td> <td>导航栏标题文字内容</td> <td></td></tr> <tr><td>navigationStyle</td> <td>String</td> <td>default</td> <td>导航栏样式，仅支持 default/custom。</td> <td>微信小程序7.0以上支持单页面设置custom以取消导航栏、百度小程序</td></tr> <tr><td>disableScroll</td> <td>Boolean</td> <td>false</td> <td>设置为 true 则页面整体不能上下滚动（bounce效果），只在页面配置中有效，在globalStyle中设置无效</td> <td>微信小程序（iOS）、百度小程序（iOS）</td></tr> <tr><td>backgroundColor</td> <td>HexColor</td> <td>#ffffff</td> <td>窗口的背景色</td> <td>微信小程序、百度小程序、头条小程序</td></tr> <tr><td>backgroundTextStyle</td> <td>String</td> <td>dark</td> <td>下拉 loading 的样式，仅支持 dark/light</td> <td></td></tr> <tr><td>enablePullDownRefresh</td> <td>Boolean</td> <td>false</td> <td>是否开启下拉刷新，详见页面生命周期。</td> <td></td></tr> <tr><td>onReachBottomDistance</td> <td>Number</td> <td>50</td> <td>页面上拉触底事件触发时距页面底部距离，单位只支持px，详见页面生命周期</td> <td></td></tr> <tr><td>backgroundColorTop</td> <td>HexColor</td> <td>#ffffff</td> <td>顶部窗口的背景色。</td> <td>仅 iOS 平台</td></tr> <tr><td>backgroundColorBottom</td> <td>HexColor</td> <td>#ffffff</td> <td>底部窗口的背景色。</td> <td>仅 iOS 平台</td></tr> <tr><td>app-plus</td> <td>Object</td> <td></td> <td>设置编译到 App 平台的特定样式，配置项参考下方 app-plus</td> <td>App</td></tr> <tr><td>h5</td> <td>Object</td> <td></td> <td>设置编译到 H5 平台的特定样式，配置项参考下方 H5</td> <td>H5</td></tr> <tr><td>usingComponents</td> <td>Object</td> <td></td> <td>引用小程序组件，参考 小程序组件</td> <td>5+App、微信小程序、支付宝小程序、百度小程序</td></tr></tbody></table> <ol><li><a href="https://uniapp.dcloud.io/api/ui/navigationbar" target="_blank" rel="noopener noreferrer">通过api修改导航栏属性<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <ul><li><code>uni.setNavigationBarTitle</code>动态设置当前页面的标题。</li></ul> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>title</td> <td>String</td> <td>是</td> <td>页面标题</td></tr> <tr><td>success</td> <td>Function</td> <td>否</td> <td>接口调用成功的回调函数</td></tr> <tr><td>fail</td> <td>Function</td> <td>否</td> <td>接口调用失败的回调函数</td></tr> <tr><td>complete</td> <td>Function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">setNavigationBarTitle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'新的标题'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><code>uni.setNavigationBarColor</code>设置页面导航条颜色</li></ul> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>说明</th> <th>平台差异说明</th></tr></thead> <tbody><tr><td>frontColor</td> <td>String</td> <td>是</td> <td>前景颜色值，包括按钮、标题、状态栏的颜色，仅支持 #ffffff 和 #000000</td> <td>5+App、H5、微信小程序、百度小程序</td></tr> <tr><td>backgroundColor</td> <td>String</td> <td>是</td> <td>背景颜色值，有效值为十六进制颜色</td> <td></td></tr> <tr><td>animation</td> <td>Object</td> <td>否</td> <td>动画效果，{duration,timingFunc}</td> <td>微信小程序、百度小程序</td></tr> <tr><td>success</td> <td>Function</td> <td>否</td> <td>接口调用成功的回调函数</td> <td></td></tr> <tr><td>fail</td> <td>Function</td> <td>否</td> <td>接口调用失败的回调函数</td> <td></td></tr> <tr><td>complete</td> <td>Function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td> <td></td></tr></tbody></table> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 通过api修改导航栏的属性
uni.setNavigationBarColor({
    frontColor: '#ffffff',
    backgroundColor: '#000000'
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="自定义导航栏按钮"><a href="#自定义导航栏按钮" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/collocation/pages?id=app-titlenview-buttons" target="_blank" rel="noopener noreferrer">自定义导航栏按钮<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p><strong>自定义按钮</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>默认值</th> <th>描述</th></tr></thead> <tbody><tr><td>type</td> <td>String</td> <td>none</td> <td>按钮样式，可取值见：buttons 样式</td></tr> <tr><td>color</td> <td>String</td> <td>默认与标题文字颜色一致</td> <td>按钮上文字颜色</td></tr> <tr><td>background</td> <td>String</td> <td>默认值为灰色半透明</td> <td>按钮的背景颜色，仅在标题栏type=transparent时生效</td></tr> <tr><td>badgeText</td> <td>String</td> <td></td> <td>按钮上显示的角标文本，最多显示3个字符，超过则显示为...</td></tr> <tr><td>colorPressed</td> <td>String</td> <td>默认值为 color 属性值自动调整透明度为 0.3</td> <td>按下状态按钮文字颜色</td></tr> <tr><td>float</td> <td>String</td> <td>right</td> <td>按钮在标题栏上的显示位置，可取值&quot;left&quot;、&quot;right&quot;</td></tr> <tr><td>fontWeight</td> <td>String</td> <td>normal</td> <td>按钮上文字的粗细。可取值&quot;normal&quot;-标准字体、&quot;bold&quot;-加粗字体。</td></tr> <tr><td>fontSize</td> <td>String</td> <td></td> <td>按钮上文字大小</td></tr> <tr><td>fontSrc</td> <td>String</td> <td></td> <td>按钮上文字使用的字体文件路径。不支持网络地址，请统一使用本地地址。</td></tr> <tr><td>select</td> <td>String</td> <td>false</td> <td>是否显示选择指示图标（向下箭头）</td></tr> <tr><td>text</td> <td>String</td> <td></td> <td>按钮上显示的文字。使用字体图标时 unicode 字符表示必须 '\u' 开头，如 &quot;\ue123&quot;（注意不能写成&quot;\e123&quot;）。</td></tr> <tr><td>width</td> <td>String</td> <td>44px</td> <td>按钮的宽度，可取值： &quot;*px&quot; - 逻辑像素值，如&quot;10px&quot;表示10逻辑像素值，不支持upx。按钮的内容居中显示； &quot;auto&quot; - 自定计算宽度，根据内容自动调整按钮宽度</td></tr></tbody></table> <p><strong>按钮样式</strong></p> <ul><li>使用 type 值设置按钮的样式时，会忽略 fontSrc 和 text 属性。</li></ul> <table><thead><tr><th>值</th> <th>说明</th></tr></thead> <tbody><tr><td>forward</td> <td>前进按钮</td></tr> <tr><td>back</td> <td>后退按钮</td></tr> <tr><td>share</td> <td>分享按钮</td></tr> <tr><td>favorite</td> <td>收藏按钮</td></tr> <tr><td>home</td> <td>主页按钮</td></tr> <tr><td>menu</td> <td>菜单按钮</td></tr> <tr><td>close</td> <td>关闭按钮</td></tr> <tr><td>none</td> <td>无样式，需通过 text 属性设置按钮上显示的内容、通过 fontSrc 属性设置使用的字体库。</td></tr></tbody></table> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//pages.json</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
			<span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/movie/movie&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;电影详情&quot;</span><span class="token punctuation">,</span>
				<span class="token property">&quot;app-plus&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">&quot;titleNView&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;transparent&quot;</span><span class="token punctuation">,</span>
						<span class="token property">&quot;buttons&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
								<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;share&quot;</span>
							<span class="token punctuation">}</span><span class="token punctuation">,</span>
							<span class="token punctuation">{</span>
								<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;home&quot;</span>
							<span class="token punctuation">}</span><span class="token punctuation">,</span>
							<span class="token punctuation">{</span>
								<span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;forward&quot;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">]</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="图片预览功能uni-previewimage"><a href="#图片预览功能uni-previewimage" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/api/media/image?id=previewimage" target="_blank" rel="noopener noreferrer">图片预览功能uni.previewImage<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <table><thead><tr><th>参数名</th> <th>类型</th> <th>必填</th> <th>说明</th> <th>平台差异说明</th></tr></thead> <tbody><tr><td>current</td> <td>String</td> <td>否</td> <td>当前显示图片的链接，不填则默认为 urls 的第一张</td> <td></td></tr> <tr><td>indicator</td> <td>String</td> <td>否</td> <td>图片指示器样式，可取值： &quot;default&quot; - 底部圆点指示器； &quot;number&quot; - 顶部数字指示器； &quot;none&quot; - 不显示指示器。</td> <td>5+APP</td></tr> <tr><td>loop</td> <td>Boolean</td> <td>否</td> <td>是否可循环预览，默认值为&quot;false&quot;</td> <td>5+APP</td></tr> <tr><td>urls</td> <td>Array(String)</td> <td>是</td> <td>需要预览的图片链接列表</td> <td></td></tr> <tr><td>longPressActions</td> <td>Object</td> <td>否</td> <td>长按图片显示操作菜单，如不填默认为保存相册</td> <td>5+APP、HBuilderX1.9.5+</td></tr> <tr><td>success</td> <td>Function</td> <td>否</td> <td>接口调用成功的回调函数</td> <td></td></tr> <tr><td>fail</td> <td>Function</td> <td>否</td> <td>接口调用失败的回调函数</td> <td></td></tr> <tr><td>complete</td> <td>Function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td> <td></td></tr></tbody></table> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scroll-block<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>plots-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>剧照<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-x</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scroll-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(img, imgIndex) in plotPicsArray<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>imgIndex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>plot-image<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>aspectFill<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:data-imgIndex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>imgIndex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>lookMe<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token function">lookMe</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token comment">// console.log(e);</span>
  	<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  	<span class="token keyword">var</span> imgIndex <span class="token operator">=</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>imgindex<span class="token punctuation">;</span>
  	uni<span class="token punctuation">.</span><span class="token function">previewImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  		current<span class="token punctuation">:</span> me<span class="token punctuation">.</span>plotPicsArray<span class="token punctuation">[</span>imgIndex<span class="token punctuation">]</span><span class="token punctuation">,</span>
  		urls<span class="token punctuation">:</span> me<span class="token punctuation">.</span>plotPicsArray
  	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="多数组图片预览"><a href="#多数组图片预览" aria-hidden="true" class="header-anchor">#</a> 多数组图片预览</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-x</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scroll-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 多数组图片预览，由于是数组对象拼接，我们要获得每一个数组里的对象，然后把每一个对象的url拿出来拼成一个新的数组，新的url，随后做预览功能 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>actor-wapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(director, staffIndex) in directorArray<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>director.staffId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>director.photo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>single-actor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>aspectFill<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>lookStaffs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:data-staffIndex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>staffIndex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>actor-name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ director.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>actor-role<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ director.actName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>actor-wapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(actor, actorIndex) in actorArray<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>actor.staffId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  	<span class="token comment">&lt;!-- 拼接index使用 --&gt;</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>actor.photo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>single-actor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>aspectFill<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>lookStaffs<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:data-staffIndex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>actorIndex + directorArray.length<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>actor-name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ actor.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>actor-role<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ actor.actName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token function">lookStaffs</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token keyword">var</span> staffIndex <span class="token operator">=</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>staffindex<span class="token punctuation">;</span>
  	<span class="token comment">// 拼接导演和演员的数组，成为一个新数组</span>
  	<span class="token keyword">var</span> directorArray <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>directorArray<span class="token punctuation">;</span>
  	<span class="token keyword">var</span> actorArray <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>actorArray<span class="token punctuation">;</span>
  	<span class="token keyword">var</span> newStaffArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  	newStaffArray <span class="token operator">=</span> newStaffArray<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>directorArray<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>actorArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token keyword">var</span> urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> newStaffArray<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  		<span class="token keyword">var</span> tempPhoto <span class="token operator">=</span> newStaffArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>photo<span class="token punctuation">;</span>
  		urls<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tempPhoto<span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token punctuation">}</span>
  	uni<span class="token punctuation">.</span><span class="token function">previewImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  		current<span class="token punctuation">:</span> urls<span class="token punctuation">[</span>staffIndex<span class="token punctuation">]</span><span class="token punctuation">,</span>
  		urls<span class="token punctuation">:</span> urls
  	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="uni-showactionsheet​显示操作菜单"><a href="#uni-showactionsheet​显示操作菜单" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/api/ui/prompt?id=showactionsheet" target="_blank" rel="noopener noreferrer">uni.showActionSheet​显示操作菜单<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <ul><li>显示底部操作的菜单项</li></ul> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>说明</th> <th>平台差异说明</th></tr></thead> <tbody><tr><td>itemList</td> <td>Array(String)</td> <td>是</td> <td>按钮的文字数组</td> <td>微信、百度、头条小程序数组长度最大为6个</td></tr> <tr><td>itemColor</td> <td>HexColor</td> <td>否</td> <td>按钮的文字颜色，字符串格式，默认为&quot;#000000&quot;</td> <td>头条小程序不支持</td></tr> <tr><td>success</td> <td>Function</td> <td>否</td> <td>接口调用成功的回调函数，详见返回参数说明</td> <td></td></tr> <tr><td>fail</td> <td>Function</td> <td>否</td> <td>接口调用失败的回调函数</td> <td></td></tr> <tr><td>complete</td> <td>Function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td> <td></td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">showActionSheet</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    itemList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'选中了第'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>tapIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'个按钮'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fail</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="自定义图片预览效果"><a href="#自定义图片预览效果" aria-hidden="true" class="header-anchor">#</a> 自定义图片预览效果</h3> <ul><li>自定义图片预览可以在组件中添加自定义操作，如保存图片</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- cover.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>black<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>widthFix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@longpress</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>operator<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span>
			cover<span class="token punctuation">:</span> <span class="token string">''</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>cover <span class="token operator">=</span> params<span class="token punctuation">.</span>cover<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		<span class="token function">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			uni<span class="token punctuation">.</span><span class="token function">showActionSheet</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				itemList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'保存图片到本地'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// console.log('选中了第' + (res.tapIndex + 1) + '个按钮');</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>tapIndex <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
							title<span class="token punctuation">:</span> <span class="token string">'图片保存中'</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						uni<span class="token punctuation">.</span><span class="token function">downloadFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
							url<span class="token punctuation">:</span> me<span class="token punctuation">.</span>cover<span class="token punctuation">,</span> <span class="token comment">//仅为示例，并非真实的资源</span>
							<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">var</span> tempFilePath <span class="token operator">=</span> res<span class="token punctuation">.</span>tempFilePath<span class="token punctuation">;</span>
									<span class="token comment">// console.log(tempFilePath);</span>
									uni<span class="token punctuation">.</span><span class="token function">saveImageToPhotosAlbum</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
										filePath<span class="token punctuation">:</span> tempFilePath<span class="token punctuation">,</span>
										<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
											uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
												title<span class="token punctuation">:</span> <span class="token string">'保存成功'</span><span class="token punctuation">,</span>
												mask<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
												duration<span class="token punctuation">:</span> <span class="token number">1500</span>
											<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
										<span class="token punctuation">}</span><span class="token punctuation">,</span>
										<span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
											uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
										<span class="token punctuation">}</span>
									<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

									
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function-variable function">fail</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.black</span> <span class="token punctuation">{</span>
	<span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
	<span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
	<span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
	<span class="token property">background</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 组件调用 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">:url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>../cover/cover?cover=' + trailerInfo.cover<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>trailerInfo.cover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cover<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br></div></div><h2 id="第三方分享接口uni-share"><a href="#第三方分享接口uni-share" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/api/plugins/share" target="_blank" rel="noopener noreferrer">第三方分享接口uni.share<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">// 此函数仅仅支持在小程序端的分享，分享到微信群或微信好友</span>
<span class="token function">onShareAppMessage</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
  	title<span class="token punctuation">:</span> me<span class="token punctuation">.</span>trailerInfo<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
  	path<span class="token punctuation">:</span> <span class="token string">'/pages/movie/movie?trailerId='</span> <span class="token operator">+</span> me<span class="token punctuation">.</span>trailerInfo<span class="token punctuation">.</span>id
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//监听导航栏的按钮</span>
<span class="token function">onNavigationBarButtonTap</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> index <span class="token operator">=</span> e<span class="token punctuation">.</span>index<span class="token punctuation">;</span>
  <span class="token comment">// console.log(index)</span>

  <span class="token keyword">var</span> trailerInfo <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>trailerInfo<span class="token punctuation">;</span>
  <span class="token keyword">var</span> trailerId <span class="token operator">=</span> trailerInfo<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
  <span class="token keyword">var</span> trailerName <span class="token operator">=</span> trailerInfo<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token keyword">var</span> cover <span class="token operator">=</span> trailerInfo<span class="token punctuation">.</span>cover<span class="token punctuation">;</span>
  <span class="token keyword">var</span> poster <span class="token operator">=</span> trailerInfo<span class="token punctuation">.</span>poster<span class="token punctuation">;</span>
  <span class="token comment">//index为0，进行分享</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	uni<span class="token punctuation">.</span><span class="token function">share</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  			provider<span class="token punctuation">:</span> <span class="token string">&quot;weixin&quot;</span><span class="token punctuation">,</span>
  			scene<span class="token punctuation">:</span> <span class="token string">&quot;WXSenceTimeline&quot;</span><span class="token punctuation">,</span>
  			type<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  			href<span class="token punctuation">:</span> <span class="token string">&quot;http://www.imovietrailer.com/#/pages/movie/movie?trailerId=&quot;</span> <span class="token operator">+</span> trailerId<span class="token punctuation">,</span>
  			title<span class="token punctuation">:</span> <span class="token string">&quot;NEXT超英预告：《&quot;</span> <span class="token operator">+</span> trailerName <span class="token operator">+</span> <span class="token string">&quot;》&quot;</span><span class="token punctuation">,</span>
  			summary<span class="token punctuation">:</span> <span class="token string">&quot;NEXT超英预告：《&quot;</span> <span class="token operator">+</span> trailerName <span class="token operator">+</span> <span class="token string">&quot;》&quot;</span><span class="token punctuation">,</span>
  			imageUrl<span class="token punctuation">:</span> cover<span class="token punctuation">,</span>
  			<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;success:&quot;</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  			<span class="token punctuation">}</span>
  		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="表单组件"><a href="#表单组件" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/component/form" target="_blank" rel="noopener noreferrer">表单组件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <table><thead><tr><th>属性名</th> <th>类型</th> <th>说明</th> <th>平台支持</th></tr></thead> <tbody><tr><td>report-submit</td> <td>Boolean</td> <td>是否返回 formId 用于发送模板消息</td> <td>微信小程序、支付宝小程序</td></tr> <tr><td>@submit</td> <td>EventHandle</td> <td>携带 form 中的数据触发 submit 事件，event.detail = {value : {'name': 'value'} , formId: ''}，report-submit 为 true 时才会返回 formId</td> <td></td></tr> <tr><td>@reset</td> <td>EventHandle</td> <td>表单重置时会触发 reset 事件</td> <td></td></tr></tbody></table> <h2 id="数据缓存"><a href="#数据缓存" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/api/storage/storage?id=setstorage" target="_blank" rel="noopener noreferrer">数据缓存<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <ul><li><code>uni.setStorage</code>将数据存储在本地缓存中指定的 key 中，会覆盖掉原来该 key 对应的内容，这是一个异步接口。</li></ul> <table><thead><tr><th>参数名</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>key</td> <td>String</td> <td>是</td> <td>本地缓存中的指定的 key</td></tr> <tr><td>data</td> <td>Object/String</td> <td>是</td> <td>需要存储的内容</td></tr> <tr><td>success</td> <td>Function</td> <td>否</td> <td>接口调用成功的回调函数</td></tr> <tr><td>fail</td> <td>Function</td> <td>否</td> <td>接口调用失败的回调函数</td></tr> <tr><td>complete</td> <td>Function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    key<span class="token punctuation">:</span> <span class="token string">'storage_key'</span><span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><code>uni.getStorage</code>从本地缓存中异步获取指定 key 对应的内容。</li></ul> <table><thead><tr><th>参数名</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>key</td> <td>String</td> <td>是</td> <td>本地缓存中的指定的 key</td></tr> <tr><td>success</td> <td>Function</td> <td>是</td> <td>接口调用的回调函数，res = {data: key对应的内容}</td></tr> <tr><td>fail</td> <td>Function</td> <td>否</td> <td>接口调用失败的回调函数</td></tr> <tr><td>complete</td> <td>Function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">getStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    key<span class="token punctuation">:</span> <span class="token string">'storage_key'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><code>uni.removeStorage</code>从本地缓存中异步移除指定 key。</li></ul> <table><thead><tr><th>参数名</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>key</td> <td>String</td> <td>是</td> <td>本地缓存中的指定的 key</td></tr> <tr><td>success</td> <td>Function</td> <td>是</td> <td>接口调用的回调函数</td></tr> <tr><td>fail</td> <td>Function</td> <td>否</td> <td>接口调用失败的回调函数</td></tr> <tr><td>complete</td> <td>Function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">removeStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    key<span class="token punctuation">:</span> <span class="token string">'storage_key'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><code>uni.setStorageSync</code>将 data 存储在本地缓存中指定的 key 中，会覆盖掉原来该 key 对应的内容，这是一个同步接口。</li></ul> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>key</td> <td>String</td> <td>是</td> <td>本地缓存中的指定的 key</td></tr> <tr><td>data</td> <td>Object/String</td> <td>是</td> <td>需要存储的内容</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">'storage_key'</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>uni.getStorageSync</code>从本地缓存中同步获取指定 key 对应的内容。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token string">'storage_key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>uni.removeStorageSync</code>从本地缓存中同步移除指定 key。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">removeStorageSync</span><span class="token punctuation">(</span><span class="token string">'storage_key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>uni.clearStorage()</code>清理本地数据缓存。</li> <li><code>uni.clearStorageSync()</code>同步清理本地数据缓存。</li></ul> <h2 id="登录-注册"><a href="#登录-注册" aria-hidden="true" class="header-anchor">#</a> 登录/注册</h2> <ul><li>登录注册调用同一个接口，通过判断账号创建时间，判断此账号时候注册，如果注册过及执行登录，否则注册并且登录</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">@submit</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>formSubmit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>face-wapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../../static/icos/default-face.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>face<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>info-wapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>words-lbl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>账号<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>请输入用户名<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder-class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>graywords<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>info-wapper<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">margin-top</span><span class="token punctuation">:</span> 40upx<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>words-lbl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>密码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>请输入密码<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder-class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>graywords<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">form-type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">margin-top</span><span class="token punctuation">:</span> 60upx<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 90%<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>注册/登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">formSubmit</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> username <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">.</span>username<span class="token punctuation">;</span>
	<span class="token keyword">var</span> password <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">.</span>password<span class="token punctuation">;</span>
	<span class="token comment">// console.log(username)</span>
	<span class="token comment">// console.log(password)</span>

	uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		title<span class="token punctuation">:</span> <span class="token string">'加载中...'</span><span class="token punctuation">,</span>
		mask<span class="token punctuation">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	uni<span class="token punctuation">.</span><span class="token function">showNavigationBarLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> serverUrl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>serverUrl<span class="token punctuation">;</span>
	<span class="token comment">// 猜你喜欢</span>
	uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		url<span class="token punctuation">:</span> serverUrl <span class="token operator">+</span> <span class="token string">'/user/registOrLogin?qq=466481615'</span><span class="token punctuation">,</span>
		method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
		header<span class="token punctuation">:</span> <span class="token punctuation">{</span>
			<span class="token string">'content-type'</span><span class="token punctuation">:</span> <span class="token string">'application/json;charset=utf-8'</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
			username<span class="token punctuation">:</span> username<span class="token punctuation">,</span>
			password<span class="token punctuation">:</span> password
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 获取真实数据之前，务必判断状态是否为200</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> userInfo <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
				<span class="token comment">// console.log(userInfo)</span>
				<span class="token comment">//保存用户信息到全局的缓存中</span>
				uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">'globalUser'</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">//tabBar页面跳转</span>
				uni<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					url<span class="token punctuation">:</span> <span class="token string">'../me/me'</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// uni.showToast({</span>
				<span class="token comment">// 	title: res.data.msg,</span>
				<span class="token comment">// 	duration: 2000,</span>
				<span class="token comment">// 	image: &quot;../../static/icos/error.png&quot;</span>
				<span class="token comment">// })</span>
				uni<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					title<span class="token punctuation">:</span> <span class="token string">'提示'</span><span class="token punctuation">,</span>
					content<span class="token punctuation">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">,</span>
					<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>confirm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// console.log('用户点击确定');</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>cancel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// console.log('用户点击取消');</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">complete</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			uni<span class="token punctuation">.</span><span class="token function">hideNavigationBarLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br></div></div><h2 id="vue原型挂载判断登录信息方法"><a href="#vue原型挂载判断登录信息方法" aria-hidden="true" class="header-anchor">#</a> vue原型挂载判断登录信息方法</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getGlobalUser</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> userInfo <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token string">&quot;globalUser&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>userInfo <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> userInfo <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&amp;&amp;</span> userInfo <span class="token operator">!=</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> userInfo<span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="第三方登录"><a href="#第三方登录" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/api/plugins/login" target="_blank" rel="noopener noreferrer">第三方登录<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <table><thead><tr><th>参数名</th> <th>类型</th> <th>必填</th> <th>说明</th> <th>平台差异说明</th></tr></thead> <tbody><tr><td>provider</td> <td>String</td> <td>否</td> <td>登录服务提供商，通过 uni.getProvider 获取，如果不设置则弹出登录列表选择界面</td> <td></td></tr> <tr><td>scopes</td> <td>String/Array</td> <td>见平台差异说明</td> <td>授权类型，默认 auth_base。支持 auth_base（静默授权）/ auth_user（主动授权） / auth_zhima（芝麻信用）</td> <td>支付宝小程序</td></tr> <tr><td>timeout</td> <td>Number</td> <td>否</td> <td>超时时间，单位ms</td> <td>微信小程序、百度小程序</td></tr> <tr><td>success</td> <td>Function</td> <td>否</td> <td>接口调用成功的回调</td> <td></td></tr> <tr><td>fail</td> <td>Function</td> <td>否</td> <td>接口调用失败的回调函数</td> <td></td></tr> <tr><td>complete</td> <td>Function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td> <td></td></tr></tbody></table> <ul><li>uni.getUserInfo 获取用户信息。</li></ul> <table><thead><tr><th>参数名</th> <th>类型</th> <th>必填</th> <th>说明</th> <th>平台差异说明</th></tr></thead> <tbody><tr><td>provider</td> <td>String</td> <td>否</td> <td>登录服务提供商，通过 uni.getProvider 获取</td> <td></td></tr> <tr><td>withCredentials</td> <td>Boolean</td> <td>否</td> <td>是否带上登录态信息。</td> <td>微信小程序、头条小程序</td></tr> <tr><td>lang</td> <td>Number</td> <td>否</td> <td>指定返回用户信息的语言，默认为 en。更多值请参考下面的说明。</td> <td>微信小程序</td></tr> <tr><td>timeout</td> <td>Number</td> <td>否</td> <td>超时时间，单位 ms。</td> <td>微信小程序</td></tr> <tr><td>success</td> <td>Function</td> <td>否</td> <td>接口调用成功的回调</td> <td></td></tr> <tr><td>fail</td> <td>Function</td> <td>否</td> <td>接口调用失败的回调函数</td> <td></td></tr> <tr><td>complete</td> <td>Function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td> <td></td></tr></tbody></table> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 第三方登录H5不支持，所以隐藏掉 --&gt;</span>
<span class="token comment">&lt;!-- #ifndef H5 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>third-wapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>third-line<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>single-line<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>line<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>third-words<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>第三方账号登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>single-line<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>line<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>third-icos-wapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 5+app 用qq/微信/微博 登录 小程序用微信小程序登录 h5不支持 --&gt;</span>
		<span class="token comment">&lt;!-- #ifdef APP-PLUS --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../../static/icos/weixin.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-logintype</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>weixin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>appOAuthLogin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>third-ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../../static/icos/QQ.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-logintype</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>qq<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>appOAuthLogin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>third-ico<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">margin-left</span><span class="token punctuation">:</span> 80upx<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../../static/icos/weibo.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-logintype</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sinaweibo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>appOAuthLogin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>third-ico<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">margin-left</span><span class="token punctuation">:</span> 80upx<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- #endif --&gt;</span>
		<span class="token comment">&lt;!-- #ifdef MP-WEIXIN --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>getUserInfo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@getuserinfo</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>wxLogin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>third-btn-ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- #endif --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- #endif --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">appOAuthLogin</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token comment">// 获取用户的登录类型</span>
			<span class="token keyword">var</span> logintype <span class="token operator">=</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>logintype<span class="token punctuation">;</span>

			<span class="token comment">// 授权登录</span>
			uni<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				provider<span class="token punctuation">:</span> logintype<span class="token punctuation">,</span>
				<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">loginRes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// 授权登录成功以后，获取用户的信息</span>
					uni<span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
						provider<span class="token punctuation">:</span> logintype<span class="token punctuation">,</span>
						<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// console.log(JSON.stringify(info));</span>

							<span class="token keyword">var</span> userInfo <span class="token operator">=</span> info<span class="token punctuation">.</span>userInfo<span class="token punctuation">;</span>
							<span class="token keyword">var</span> face <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
							<span class="token keyword">var</span> nickname <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
							<span class="token keyword">var</span> openIdOrUid <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>logintype <span class="token operator">==</span> <span class="token string">'weixin'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								face <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>avatarUrl<span class="token punctuation">;</span>
								nickname <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>nickName<span class="token punctuation">;</span>
								openIdOrUid <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>openId<span class="token punctuation">;</span>
							<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>logintype <span class="token operator">==</span> <span class="token string">'qq'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								openIdOrUid <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>openId<span class="token punctuation">;</span>
								nickname <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>nickname<span class="token punctuation">;</span>
								face <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>figureurl_qq_2<span class="token punctuation">;</span>
							<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>logintype <span class="token operator">==</span> <span class="token string">'sinaweibo'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								openIdOrUid <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
								nickname <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>nickname<span class="token punctuation">;</span>
								face <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>avatar_large<span class="token punctuation">;</span>
							<span class="token punctuation">}</span>

							<span class="token comment">// 调用开发者后台，执行一键注册或登录</span>
							uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
								url<span class="token punctuation">:</span> me<span class="token punctuation">.</span>serverUrl <span class="token operator">+</span> <span class="token string">'/appUnionLogin/'</span> <span class="token operator">+</span> logintype <span class="token operator">+</span> <span class="token string">'?qq=466481615'</span><span class="token punctuation">,</span>
								data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
									openIdOrUid<span class="token punctuation">:</span> openIdOrUid<span class="token punctuation">,</span>
									nickname<span class="token punctuation">:</span> nickname<span class="token punctuation">,</span>
									face<span class="token punctuation">:</span> face
								<span class="token punctuation">}</span><span class="token punctuation">,</span>
								method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
								<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										<span class="token keyword">var</span> userInfo <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
										<span class="token comment">// 保存用户信息到全局的缓存中</span>
										uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">'globalUser'</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
										<span class="token comment">// 切换页面跳转，使用tab切换的api</span>
										uni<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
											url<span class="token punctuation">:</span> <span class="token string">'../me/me'</span>
										<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>userResult<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										uni<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
											title<span class="token punctuation">:</span> <span class="token string">'提示'</span><span class="token punctuation">,</span>
											content<span class="token punctuation">:</span> userResult<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">,</span>
											<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
												<span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>confirm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
													<span class="token comment">// console.log('用户点击确定');</span>
												<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>cancel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
													<span class="token comment">// console.log('用户点击取消');</span>
												<span class="token punctuation">}</span>
											<span class="token punctuation">}</span>
										<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// 实现在微信小程序端的微信登录</span>
		<span class="token function">wxLogin</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 通过微信开发能力，获得微信用户的基本信息</span>
			<span class="token keyword">var</span> userInfo <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>userInfo<span class="token punctuation">;</span>

			<span class="token comment">// 实现微信登录</span>
			uni<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				provider<span class="token punctuation">:</span> <span class="token string">'weixin'</span><span class="token punctuation">,</span>
				<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">loginResult</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// console.log(loginResult);</span>
					<span class="token comment">// 获得微信登录的code：授权码</span>
					<span class="token keyword">var</span> code <span class="token operator">=</span> loginResult<span class="token punctuation">.</span>code<span class="token punctuation">;</span>
					<span class="token comment">// 设置登录到哪个对于的微信小程序，大家可以根据自己的后端去实现业务参数</span>
					<span class="token comment">// [0:NEXT超英预告][1:超英预告][2:NEXT学院电影预告]</span>
					<span class="token keyword">var</span> loginToWhichMP <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
					uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
						url<span class="token punctuation">:</span> me<span class="token punctuation">.</span>serverUrl <span class="token operator">+</span> <span class="token string">'/mpWXLogin/'</span> <span class="token operator">+</span> code <span class="token operator">+</span> <span class="token string">'?qq=466481615'</span><span class="token punctuation">,</span>
						header<span class="token punctuation">:</span> <span class="token punctuation">{</span>
							<span class="token string">'content-type'</span><span class="token punctuation">:</span> <span class="token string">'application/json;charset=utf-8'</span>
						<span class="token punctuation">}</span><span class="token punctuation">,</span>
						data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
							avatarUrl<span class="token punctuation">:</span> userInfo<span class="token punctuation">.</span>avatarUrl<span class="token punctuation">,</span>
							nickName<span class="token punctuation">:</span> userInfo<span class="token punctuation">.</span>nickName<span class="token punctuation">,</span>
							whichMP<span class="token punctuation">:</span> loginToWhichMP
						<span class="token punctuation">}</span><span class="token punctuation">,</span>
						method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
						<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">userResult</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>userResult<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">var</span> userInfo <span class="token operator">=</span> userResult<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
								<span class="token comment">// 保存用户信息到全局的缓存中</span>
								uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">'globalUser'</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token comment">// 切换页面跳转，使用tab切换的api</span>
								uni<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
									url<span class="token punctuation">:</span> <span class="token string">'../me/me'</span>
								<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>userResult<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								uni<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
									title<span class="token punctuation">:</span> <span class="token string">'提示'</span><span class="token punctuation">,</span>
									content<span class="token punctuation">:</span> userResult<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">,</span>
									<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										<span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>confirm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
											<span class="token comment">// console.log('用户点击确定');</span>
										<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>cancel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
											<span class="token comment">// console.log('用户点击取消');</span>
										<span class="token punctuation">}</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br></div></div><h2 id="我的页面获取登录信息"><a href="#我的页面获取登录信息" aria-hidden="true" class="header-anchor">#</a> 我的页面获取登录信息</h2> <ul><li>通过<code>userIsLogin</code>判断是否登录，登录显示登录信息，未登录显示点击注册登录</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page page-fill<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>userIsLogin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>userInfo.faceImage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>face<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://122.152.205.72:88/group1/M00/00/05/CpoxxFw_-5-AFyVyAABLIH8xBTw233.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>face<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>info-wapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>userIsLogin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>nickname<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					{{userInfo.nickname}}
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>nav-info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ID：{{userInfo.id}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../registLogin/registLogin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>nickname regist-login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
						注册/登录
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>set-wapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>userIsLogin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../meInfo/meInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../../static/icos/settings.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>settings<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>	
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				userIsLogin<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
				userInfo<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>	
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">onShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token comment">// 用户状态的切换</span>
			<span class="token comment">// var userInfo = uni.getStorageSync(&quot;globalUser&quot;);</span>
			<span class="token comment">// if (userInfo != null &amp;&amp; userInfo != &quot;&quot; &amp;&amp; userInfo != undefined) {</span>
			<span class="token comment">// 	me.userIsLogin = true;</span>
			<span class="token comment">// 	me.userInfo = userInfo;</span>
			<span class="token comment">// } else {</span>
			<span class="token comment">// 	me.userIsLogin = false;</span>
			<span class="token comment">// 	me.userInfo = {};</span>
			<span class="token comment">// }</span>

			<span class="token comment">// 使用挂载方法获取用户数据</span>
			<span class="token keyword">var</span> userInfo <span class="token operator">=</span> me<span class="token punctuation">.</span><span class="token function">getGlobalUser</span><span class="token punctuation">(</span><span class="token string">&quot;globalUser&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>userInfo <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				me<span class="token punctuation">.</span>userIsLogin <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				me<span class="token punctuation">.</span>userInfo <span class="token operator">=</span> userInfo<span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				me<span class="token punctuation">.</span>userIsLogin <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				me<span class="token punctuation">.</span>userInfo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@import</span> <span class="token url">url('me.less')</span><span class="token punctuation">;</span></span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h2 id="个人中心页面设置退出登录"><a href="#个人中心页面设置退出登录" aria-hidden="true" class="header-anchor">#</a> 个人中心页面设置退出登录</h2> <ul><li>退出登录时，后端也有用户登录的会话数据，前后端都需要清理用户登录数据，用户发起请求，后端退出登录成功前台清理用户信息</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page page-fill<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page-block info-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token comment">&lt;!-- 头像 --&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item-wapper face-line-upbottom<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>operator<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>info-words<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>头像<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>right-wapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>globalUser.faceImage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>face<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>arrow-block<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../../static/icos/left-gray-arrow.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>arrow-ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>line-top<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>line<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			
			<span class="token comment">&lt;!-- 昵称 --&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item-wapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>modifyNickname<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>info-words<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>昵称<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
				
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>right-wapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gray-fields<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
						{{globalUser.nickname}}
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>arrow-block<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../../static/icos/left-gray-arrow.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>arrow-ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>line-top<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>line<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			
			<span class="token comment">&lt;!-- 生日 --&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item-wapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>modifyBirthday<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>info-words<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>生日<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
				
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>right-wapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gray-fields<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
						{{globalUser.birthday}}
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>arrow-block<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../../static/icos/left-gray-arrow.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>arrow-ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>line-top<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>line<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			
			<span class="token comment">&lt;!-- 性别 --&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item-wapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>modifySex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>info-words<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>性别<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
				
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>right-wapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gray-fields<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
						
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>globalUser.sex == 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
							男
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>globalUser.sex == 0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
							女
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
							未选择
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
						
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>arrow-block<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../../static/icos/left-gray-arrow.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>arrow-ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>footer-wapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>footer-words<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>cleanStorage<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				清理缓存
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>footer-words<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">margin-top</span><span class="token punctuation">:</span> 10upx<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>logout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				退出登录
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				globalUser<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">onShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> globalUser <span class="token operator">=</span> me<span class="token punctuation">.</span><span class="token function">getGlobalUser</span><span class="token punctuation">(</span><span class="token string">&quot;globalUser&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			me<span class="token punctuation">.</span>globalUser <span class="token operator">=</span> globalUser<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
			<span class="token function">modifySex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					url<span class="token punctuation">:</span> <span class="token string">&quot;../sex/sex&quot;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">modifyBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					url<span class="token punctuation">:</span> <span class="token string">&quot;../meBirthday/meBirthday&quot;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">modifyNickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					url<span class="token punctuation">:</span> <span class="token string">&quot;../meNickname/meNickname&quot;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token keyword">var</span> globalUser <span class="token operator">=</span> me<span class="token punctuation">.</span><span class="token function">getGlobalUser</span><span class="token punctuation">(</span><span class="token string">&quot;globalUser&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				uni<span class="token punctuation">.</span><span class="token function">showActionSheet</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					itemList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;查看我的头像&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;从相册选择上传&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> index <span class="token operator">=</span> res<span class="token punctuation">.</span>tapIndex<span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// 预览头像</span>
							<span class="token keyword">var</span> faceArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
							faceArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>globalUser<span class="token punctuation">.</span>faceImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
							uni<span class="token punctuation">.</span><span class="token function">previewImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
								urls<span class="token punctuation">:</span> faceArr<span class="token punctuation">,</span>
								current<span class="token punctuation">:</span> faceArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// 选择上传头像</span>
							uni<span class="token punctuation">.</span><span class="token function">chooseImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
								count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
								sizeType<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;compressed&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
								sourceType<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;album&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
								<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token comment">// 获得临时路径</span>
									<span class="token keyword">var</span> tempFilePath <span class="token operator">=</span> res<span class="token punctuation">.</span>tempFilePaths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
									<span class="token comment">// #ifdef H5</span>
									uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
										url<span class="token punctuation">:</span> <span class="token string">&quot;../meFace/meFace?tempFilePath=&quot;</span> <span class="token operator">+</span> tempFilePath
									<span class="token punctuation">}</span><span class="token punctuation">)</span>
									<span class="token comment">// #endif</span>
									<span class="token comment">// #ifndef H5</span>
									uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
										url<span class="token punctuation">:</span> <span class="token string">&quot;../faceCrop/faceCrop?tempFilePath=&quot;</span> <span class="token operator">+</span> tempFilePath
									<span class="token punctuation">}</span><span class="token punctuation">)</span>
									<span class="token comment">// #endif</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">cleanStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				uni<span class="token punctuation">.</span><span class="token function">clearStorageSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					title<span class="token punctuation">:</span> <span class="token string">&quot;清理缓存成功&quot;</span><span class="token punctuation">,</span>
					mask<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
					duration<span class="token punctuation">:</span> <span class="token number">1500</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//后端也有用户登录的会话数据，前后端都需要清理用户登录数据，用户发起请求，后端退出登录成功前台清理用户信息</span>
				<span class="token keyword">var</span> globalUser <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getGlobalUser</span><span class="token punctuation">(</span><span class="token string">&quot;globalUser&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">var</span> serverUrl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>serverUrl<span class="token punctuation">;</span>
				uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					url<span class="token punctuation">:</span> serverUrl <span class="token operator">+</span> <span class="token string">'/user/logout?userId='</span> <span class="token operator">+</span> globalUser<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
					method<span class="token punctuation">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
					header<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						<span class="token string">'content-type'</span><span class="token punctuation">:</span> <span class="token string">'application/x-www-form-urlencoded'</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						qq<span class="token punctuation">:</span> <span class="token string">'466481615'</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
						<span class="token comment">// 获取真实数据之前，务必判断状态是否为200</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// 如果服务器返回200，代表用户在服务端退出登录成功</span>
							uni<span class="token punctuation">.</span><span class="token function">removeStorageSync</span><span class="token punctuation">(</span><span class="token string">&quot;globalUser&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							uni<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
								url<span class="token punctuation">:</span> <span class="token string">&quot;../me/me&quot;</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@import</span> <span class="token url">url('meInfo.less')</span><span class="token punctuation">;</span></span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br></div></div><h2 id="上传功能uni-uploadfile"><a href="#上传功能uni-uploadfile" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/api/request/network-file" target="_blank" rel="noopener noreferrer">上传功能uni.uploadFile<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <table><thead><tr><th>参数名</th> <th>类型</th> <th>必填</th> <th>说明</th> <th>平台差异说明</th></tr></thead> <tbody><tr><td>url</td> <td>String</td> <td>是</td> <td>开发者服务器 url</td> <td></td></tr> <tr><td>files</td> <td>Array</td> <td>否</td> <td>需要上传的文件列表。使用 files 时，filePath 和 name 不生效。</td> <td>5+App</td></tr> <tr><td>fileType</td> <td>String</td> <td>见平台差异说明</td> <td>文件类型，image/video/audio</td> <td>仅支付宝小程序，且必填。</td></tr> <tr><td>filePath</td> <td>String</td> <td>是</td> <td>要上传文件资源的路径。</td> <td></td></tr> <tr><td>name</td> <td>String</td> <td>是</td> <td>文件对应的 key , 开发者在服务器端通过这个 key 可以获取到文件二进制内容</td> <td></td></tr> <tr><td>header</td> <td>Object</td> <td>否</td> <td>HTTP 请求 Header, header 中不能设置 Referer。</td> <td></td></tr> <tr><td>formData</td> <td>Object</td> <td>否</td> <td>HTTP 请求中其他额外的 form data</td> <td></td></tr> <tr><td>success</td> <td>Function</td> <td>否</td> <td>接口调用成功的回调函数</td> <td></td></tr> <tr><td>fail</td> <td>Function</td> <td>否</td> <td>接口调用失败的回调函数</td> <td></td></tr> <tr><td>complete</td> <td>Function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td> <td></td></tr></tbody></table> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- meFace.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page page-fill<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>pending-wapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>face<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tempFace<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>pending-face<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scaleToFill<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>notice<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>notice-words<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				* 请从相册中选择等比宽高的图片噢~
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>footer-opertor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>opertor-words<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changePendingFace<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				重新选择
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>opertor-words<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>upload<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				确认上传
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				tempFace<span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> tempFilePath <span class="token operator">=</span> params<span class="token punctuation">.</span>tempFilePath<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>tempFace <span class="token operator">=</span> tempFilePath<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
			<span class="token comment">// 重新选择头像</span>
			<span class="token function">changePendingFace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				uni<span class="token punctuation">.</span><span class="token function">chooseImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
					sizeType<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;compressed&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					sourceType<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;camera&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// 获得临时路径</span>
						<span class="token keyword">var</span> tempFilePath <span class="token operator">=</span> res<span class="token punctuation">.</span>tempFilePaths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
						me<span class="token punctuation">.</span>tempFace <span class="token operator">=</span> tempFilePath<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">upload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token keyword">var</span> globalUser <span class="token operator">=</span> me<span class="token punctuation">.</span><span class="token function">getGlobalUser</span><span class="token punctuation">(</span><span class="token string">&quot;globalUser&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
				uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					mask<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
					title<span class="token punctuation">:</span> <span class="token string">&quot;上传中，请稍后&quot;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">//文件上传服务器</span>
				uni<span class="token punctuation">.</span><span class="token function">uploadFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					url<span class="token punctuation">:</span> me<span class="token punctuation">.</span>serverUrl <span class="token operator">+</span> <span class="token string">&quot;/user/uploadFace?userId=&quot;</span> <span class="token operator">+</span> globalUser<span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">'&amp;qq=466481615'</span><span class="token punctuation">,</span>
					filePath<span class="token punctuation">:</span> me<span class="token punctuation">.</span>tempFace<span class="token punctuation">,</span>
					name<span class="token punctuation">:</span> <span class="token string">&quot;file&quot;</span><span class="token punctuation">,</span>
					header<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						<span class="token string">&quot;headerUserId&quot;</span><span class="token punctuation">:</span> globalUser<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
						<span class="token string">&quot;headerUserToken&quot;</span><span class="token punctuation">:</span> globalUser<span class="token punctuation">.</span>userUniqueToken
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// debugger;</span>
						<span class="token keyword">var</span> resDataStr <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
						<span class="token comment">// console.log(typeof(resDataStr));</span>
						<span class="token comment">//上传文件返回的res是一个字符串，需要进行转换</span>
						<span class="token keyword">var</span> resData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>resDataStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token comment">// console.log(typeof(resData));</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>resData<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// 获得最新的用户数据</span>
							<span class="token keyword">var</span> userInfo <span class="token operator">=</span> resData<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
							uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">&quot;globalUser&quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
							uni<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
								delta<span class="token punctuation">:</span> <span class="token number">1</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>resData<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">502</span> <span class="token operator">||</span> resData<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
								title<span class="token punctuation">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">,</span>
								image<span class="token punctuation">:</span> <span class="token string">&quot;../../static/icos/error.png&quot;</span><span class="token punctuation">,</span>
								duration<span class="token punctuation">:</span> <span class="token number">2000</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br></div></div><h2 id="自定义图片裁剪上传功能"><a href="#自定义图片裁剪上传功能" aria-hidden="true" class="header-anchor">#</a> 自定义图片裁剪上传功能</h2> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- faceCrop --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page page-fill<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page-body uni-content-info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>cropper-content<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>isShowImg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-corpper myDistance<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token string">'width:'</span>+cropperInitW+<span class="token string">'px;height:'</span>+cropperInitH+<span class="token string">'px;background:#000'</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-corpper-content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token string">'width:'</span>+cropperW+<span class="token string">'px;height:'</span>+cropperH+<span class="token string">'px;left:'</span>+cropperL+<span class="token string">'px;top:'</span>+cropperT+<span class="token string">'px'</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>imageSrc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myImage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token string">'width:'</span>+cropperW+<span class="token string">'px;height:'</span>+cropperH+<span class="token string">'px'</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-corpper-crop-box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchstart.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>contentStartMove<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchmove.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>contentMoveing<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchend.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>contentTouchEnd<span class="token punctuation">&quot;</span></span>
							<span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token string">'left:'</span>+cutL+<span class="token string">'px;top:'</span>+cutT+<span class="token string">'px;right:'</span>+cutR+<span class="token string">'px;bottom:'</span>+cutB+<span class="token string">'px'</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-view-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
								<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-dashed-h<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
								<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-dashed-v<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
								<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-line-t<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-drag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>top<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchstart.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragStart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchmove.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragMove<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
								<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-line-r<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-drag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchstart.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragStart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchmove.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragMove<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
								<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-line-b<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-drag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bottom<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchstart.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragStart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchmove.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragMove<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
								<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-line-l<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-drag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchstart.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragStart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchmove.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragMove<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
								<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-point point-t<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-drag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>top<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchstart.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragStart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchmove.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragMove<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
								<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-point point-tr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-drag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>topTight<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
								<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-point point-r<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-drag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchstart.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragStart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchmove.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragMove<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
								<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-point point-rb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-drag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>rightBottom<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchstart.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragStart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchmove.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragMove<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
								<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-point point-b<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-drag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bottom<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchstart.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragStart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchmove.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragMove<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchend.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragEnd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
								<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-point point-bl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-drag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bottomLeft<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
								<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-point point-l<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-drag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchstart.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragStart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@touchmove.stop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dragMove<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
								<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>uni-cropper-point point-lt<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-drag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>leftTop<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token comment">&lt;!-- &lt;view class='cropper-config'&gt;
				&lt;button type=&quot;primary reverse&quot; @click=&quot;getImage&quot; style='margin-top: 30upx;'&gt; 选择图片 &lt;/button&gt;
				&lt;button type=&quot;warn&quot; @click=&quot;getImageInfo&quot; style='margin-top: 30upx;'&gt; 点击生成图片 &lt;/button&gt;
			&lt;/view&gt; --&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>footer-opertor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>opertor-words<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>getImage<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					重新选择
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>opertor-words<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>getImageInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					确认上传
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">canvas-id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myCanvas<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token string">'position:absolute;border: 1px solid red; width:'</span>+imageW+<span class="token string">'px;height:'</span>+imageH+<span class="token string">'px;top:-9999px;left:-9999px;'</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- &lt;page-foot :name=&quot;name&quot;&gt;&lt;/page-foot&gt; --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">let</span> sysInfo <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> <span class="token constant">SCREEN_WIDTH</span> <span class="token operator">=</span> sysInfo<span class="token punctuation">.</span>screenWidth
	<span class="token keyword">let</span> <span class="token constant">PAGE_X</span><span class="token punctuation">,</span> <span class="token comment">// 手按下的x位置</span>
		<span class="token constant">PAGE_Y</span><span class="token punctuation">,</span> <span class="token comment">// 手按下y的位置 </span>
		<span class="token constant">PR</span> <span class="token operator">=</span> sysInfo<span class="token punctuation">.</span>pixelRatio<span class="token punctuation">,</span> <span class="token comment">// dpi</span>
		<span class="token constant">T_PAGE_X</span><span class="token punctuation">,</span> <span class="token comment">// 手移动的时候x的位置</span>
		<span class="token constant">T_PAGE_Y</span><span class="token punctuation">,</span> <span class="token comment">// 手移动的时候Y的位置</span>
		<span class="token constant">CUT_L</span><span class="token punctuation">,</span> <span class="token comment">// 初始化拖拽元素的left值</span>
		<span class="token constant">CUT_T</span><span class="token punctuation">,</span> <span class="token comment">// 初始化拖拽元素的top值</span>
		<span class="token constant">CUT_R</span><span class="token punctuation">,</span> <span class="token comment">// 初始化拖拽元素的</span>
		<span class="token constant">CUT_B</span><span class="token punctuation">,</span> <span class="token comment">// 初始化拖拽元素的</span>
		<span class="token constant">CUT_W</span><span class="token punctuation">,</span> <span class="token comment">// 初始化拖拽元素的宽度</span>
		<span class="token constant">CUT_H</span><span class="token punctuation">,</span> <span class="token comment">//  初始化拖拽元素的高度</span>
		<span class="token constant">IMG_RATIO</span><span class="token punctuation">,</span> <span class="token comment">// 图片比例</span>
		<span class="token constant">IMG_REAL_W</span><span class="token punctuation">,</span> <span class="token comment">// 图片实际的宽度</span>
		<span class="token constant">IMG_REAL_H</span><span class="token punctuation">,</span> <span class="token comment">// 图片实际的高度</span>
		<span class="token constant">DRAFG_MOVE_RATIO</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">//移动时候的比例,</span>
		<span class="token constant">INIT_DRAG_POSITION</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">// 初始化屏幕宽度和裁剪区域的宽度之差，用于设置初始化裁剪的宽度</span>
		<span class="token constant">DRAW_IMAGE_W</span> <span class="token operator">=</span> sysInfo<span class="token punctuation">.</span>screenWidth <span class="token comment">// 设置生成的图片宽度</span>

	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
		<span class="token comment">/**
		 * 页面的初始数据
		 */</span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				<span class="token comment">// name:'杨大宝',</span>
				imageSrc<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
				isShowImg<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
				<span class="token comment">// 初始化的宽高</span>
				cropperInitW<span class="token punctuation">:</span> <span class="token constant">SCREEN_WIDTH</span><span class="token punctuation">,</span>
				cropperInitH<span class="token punctuation">:</span> <span class="token constant">SCREEN_WIDTH</span><span class="token punctuation">,</span>
				<span class="token comment">// 动态的宽高</span>
				cropperW<span class="token punctuation">:</span> <span class="token constant">SCREEN_WIDTH</span><span class="token punctuation">,</span>
				cropperH<span class="token punctuation">:</span> <span class="token constant">SCREEN_WIDTH</span><span class="token punctuation">,</span>
				<span class="token comment">// 动态的left top值</span>
				cropperL<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
				cropperT<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>

				transL<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
				transT<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>

				<span class="token comment">// 图片缩放值</span>
				scaleP<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
				imageW<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
				imageH<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>

				<span class="token comment">// 裁剪框 宽高</span>
				cutL<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
				cutT<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
				cutB<span class="token punctuation">:</span> <span class="token constant">SCREEN_WIDTH</span><span class="token punctuation">,</span>
				cutR<span class="token punctuation">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
				qualityWidth<span class="token punctuation">:</span> <span class="token constant">DRAW_IMAGE_W</span><span class="token punctuation">,</span>
				innerAspectRadio<span class="token punctuation">:</span> <span class="token constant">DRAFG_MOVE_RATIO</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">/**
		 * 生命周期函数--监听页面加载
		 */</span>
		<span class="token function-variable function">onLoad</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> imageSrc <span class="token operator">=</span> params<span class="token punctuation">.</span>tempFilePath<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>imageSrc <span class="token operator">=</span> imageSrc<span class="token punctuation">;</span>
			
			<span class="token keyword">var</span> globalUser <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getGlobalUser</span><span class="token punctuation">(</span><span class="token string">'globalUser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>globalUser <span class="token operator">=</span> globalUser<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">/**
		 * 生命周期函数--监听页面初次渲染完成
		 */</span>
		<span class="token function-variable function">mounted</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">setData</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					that<span class="token punctuation">.</span>$<span class="token keyword">set</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>$data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>

				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">getImage</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
				uni<span class="token punctuation">.</span><span class="token function">chooseImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						_this<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
							imageSrc<span class="token punctuation">:</span> res<span class="token punctuation">.</span>tempFilePaths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span>
						_this<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">loadImage</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
				uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					title<span class="token punctuation">:</span> <span class="token string">'图片加载中...'</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>

				uni<span class="token punctuation">.</span><span class="token function">getImageInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					src<span class="token punctuation">:</span> _this<span class="token punctuation">.</span>imageSrc<span class="token punctuation">,</span>
					<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token constant">IMG_RATIO</span> <span class="token operator">=</span> res<span class="token punctuation">.</span>width <span class="token operator">/</span> res<span class="token punctuation">.</span>height
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">IMG_RATIO</span> <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token constant">IMG_REAL_W</span> <span class="token operator">=</span> <span class="token constant">SCREEN_WIDTH</span>
							<span class="token constant">IMG_REAL_H</span> <span class="token operator">=</span> <span class="token constant">SCREEN_WIDTH</span> <span class="token operator">/</span> <span class="token constant">IMG_RATIO</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
							<span class="token constant">IMG_REAL_W</span> <span class="token operator">=</span> <span class="token constant">SCREEN_WIDTH</span> <span class="token operator">*</span> <span class="token constant">IMG_RATIO</span>
							<span class="token constant">IMG_REAL_H</span> <span class="token operator">=</span> <span class="token constant">SCREEN_WIDTH</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">let</span> minRange <span class="token operator">=</span> <span class="token constant">IMG_REAL_W</span> <span class="token operator">&gt;</span> <span class="token constant">IMG_REAL_H</span> <span class="token operator">?</span> <span class="token constant">IMG_REAL_W</span> <span class="token punctuation">:</span> <span class="token constant">IMG_REAL_H</span>
						<span class="token constant">INIT_DRAG_POSITION</span> <span class="token operator">=</span> minRange <span class="token operator">&gt;</span> <span class="token constant">INIT_DRAG_POSITION</span> <span class="token operator">?</span> <span class="token constant">INIT_DRAG_POSITION</span> <span class="token punctuation">:</span> minRange
						<span class="token comment">// 根据图片的宽高显示不同的效果   保证图片可以正常显示</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">IMG_RATIO</span> <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">let</span> cutT <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">SCREEN_WIDTH</span> <span class="token operator">/</span> <span class="token constant">IMG_RATIO</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token constant">SCREEN_WIDTH</span> <span class="token operator">/</span> <span class="token constant">IMG_RATIO</span> <span class="token operator">-</span> <span class="token constant">INIT_DRAG_POSITION</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">let</span> cutB <span class="token operator">=</span> cutT<span class="token punctuation">;</span>
							<span class="token keyword">let</span> cutL <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">SCREEN_WIDTH</span> <span class="token operator">-</span> <span class="token constant">SCREEN_WIDTH</span> <span class="token operator">+</span> <span class="token constant">INIT_DRAG_POSITION</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">let</span> cutR <span class="token operator">=</span> cutL<span class="token punctuation">;</span>
							_this<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
								cropperW<span class="token punctuation">:</span> <span class="token constant">SCREEN_WIDTH</span><span class="token punctuation">,</span>
								cropperH<span class="token punctuation">:</span> <span class="token constant">SCREEN_WIDTH</span> <span class="token operator">/</span> <span class="token constant">IMG_RATIO</span><span class="token punctuation">,</span>
								<span class="token comment">// 初始化left right</span>
								cropperL<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">SCREEN_WIDTH</span> <span class="token operator">-</span> <span class="token constant">SCREEN_WIDTH</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
								cropperT<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">SCREEN_WIDTH</span> <span class="token operator">-</span> <span class="token constant">SCREEN_WIDTH</span> <span class="token operator">/</span> <span class="token constant">IMG_RATIO</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
								cutL<span class="token punctuation">:</span> cutL<span class="token punctuation">,</span>
								cutT<span class="token punctuation">:</span> cutT<span class="token punctuation">,</span>
								cutR<span class="token punctuation">:</span> cutR<span class="token punctuation">,</span>
								cutB<span class="token punctuation">:</span> cutB<span class="token punctuation">,</span>
								<span class="token comment">// 图片缩放值</span>
								imageW<span class="token punctuation">:</span> <span class="token constant">IMG_REAL_W</span><span class="token punctuation">,</span>
								imageH<span class="token punctuation">:</span> <span class="token constant">IMG_REAL_H</span><span class="token punctuation">,</span>
								scaleP<span class="token punctuation">:</span> <span class="token constant">IMG_REAL_W</span> <span class="token operator">/</span> <span class="token constant">SCREEN_WIDTH</span><span class="token punctuation">,</span>
								qualityWidth<span class="token punctuation">:</span> <span class="token constant">DRAW_IMAGE_W</span><span class="token punctuation">,</span>
								innerAspectRadio<span class="token punctuation">:</span> <span class="token constant">IMG_RATIO</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
							<span class="token keyword">let</span> cutL <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">SCREEN_WIDTH</span> <span class="token operator">*</span> <span class="token constant">IMG_RATIO</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token constant">SCREEN_WIDTH</span> <span class="token operator">*</span> <span class="token constant">IMG_RATIO</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">let</span> cutR <span class="token operator">=</span> cutL<span class="token punctuation">;</span>
							<span class="token keyword">let</span> cutT <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">SCREEN_WIDTH</span> <span class="token operator">-</span> <span class="token constant">INIT_DRAG_POSITION</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">let</span> cutB <span class="token operator">=</span> cutT<span class="token punctuation">;</span>
							_this<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
								cropperW<span class="token punctuation">:</span> <span class="token constant">SCREEN_WIDTH</span> <span class="token operator">*</span> <span class="token constant">IMG_RATIO</span><span class="token punctuation">,</span>
								cropperH<span class="token punctuation">:</span> <span class="token constant">SCREEN_WIDTH</span><span class="token punctuation">,</span>
								<span class="token comment">// 初始化left right</span>
								cropperL<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">SCREEN_WIDTH</span> <span class="token operator">-</span> <span class="token constant">SCREEN_WIDTH</span> <span class="token operator">*</span> <span class="token constant">IMG_RATIO</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
								cropperT<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">SCREEN_WIDTH</span> <span class="token operator">-</span> <span class="token constant">SCREEN_WIDTH</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

								cutL<span class="token punctuation">:</span> cutL<span class="token punctuation">,</span>
								cutT<span class="token punctuation">:</span> cutT<span class="token punctuation">,</span>
								cutR<span class="token punctuation">:</span> cutR<span class="token punctuation">,</span>
								cutB<span class="token punctuation">:</span> cutB<span class="token punctuation">,</span>
								<span class="token comment">// 图片缩放值</span>
								imageW<span class="token punctuation">:</span> <span class="token constant">IMG_REAL_W</span><span class="token punctuation">,</span>
								imageH<span class="token punctuation">:</span> <span class="token constant">IMG_REAL_H</span><span class="token punctuation">,</span>
								scaleP<span class="token punctuation">:</span> <span class="token constant">IMG_REAL_W</span> <span class="token operator">/</span> <span class="token constant">SCREEN_WIDTH</span><span class="token punctuation">,</span>
								qualityWidth<span class="token punctuation">:</span> <span class="token constant">DRAW_IMAGE_W</span><span class="token punctuation">,</span>
								innerAspectRadio<span class="token punctuation">:</span> <span class="token constant">IMG_RATIO</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token punctuation">}</span>
						_this<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
							isShowImg<span class="token punctuation">:</span> <span class="token boolean">true</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span>
						uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token comment">// 拖动时候触发的touchStart事件</span>
			<span class="token function">contentStartMove</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token constant">PAGE_X</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageX
				<span class="token constant">PAGE_Y</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageY
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// 拖动时候触发的touchMove事件</span>
			<span class="token function">contentMoveing</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
				<span class="token keyword">var</span> dragLengthX <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">PAGE_X</span> <span class="token operator">-</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageX<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">DRAFG_MOVE_RATIO</span>
				<span class="token keyword">var</span> dragLengthY <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">PAGE_Y</span> <span class="token operator">-</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageY<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">DRAFG_MOVE_RATIO</span>
				<span class="token comment">// 左移</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>dragLengthX <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cutL <span class="token operator">-</span> dragLengthX <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> dragLengthX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cutL
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cutR <span class="token operator">+</span> dragLengthX <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> dragLengthX <span class="token operator">=</span> <span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>cutR
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>dragLengthY <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cutT <span class="token operator">-</span> dragLengthY <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> dragLengthY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cutT
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cutB <span class="token operator">+</span> dragLengthY <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> dragLengthY <span class="token operator">=</span> <span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>cutB
				<span class="token punctuation">}</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					cutL<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cutL <span class="token operator">-</span> dragLengthX<span class="token punctuation">,</span>
					cutT<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cutT <span class="token operator">-</span> dragLengthY<span class="token punctuation">,</span>
					cutR<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cutR <span class="token operator">+</span> dragLengthX<span class="token punctuation">,</span>
					cutB<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cutB <span class="token operator">+</span> dragLengthY
				<span class="token punctuation">}</span><span class="token punctuation">)</span>

				<span class="token constant">PAGE_X</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageX
				<span class="token constant">PAGE_Y</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageY
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token function">contentTouchEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// 获取图片</span>
			<span class="token function">getImageInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					title<span class="token punctuation">:</span> <span class="token string">'图片生成中...'</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
				<span class="token comment">// 将图片写入画布</span>
				<span class="token keyword">const</span> ctx <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">createCanvasContext</span><span class="token punctuation">(</span><span class="token string">'myCanvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>_this<span class="token punctuation">.</span>imageSrc<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">IMG_REAL_W</span><span class="token punctuation">,</span> <span class="token constant">IMG_REAL_H</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				ctx<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token comment">// 获取画布要裁剪的位置和宽度   均为百分比 * 画布中图片的宽度    保证了在微信小程序中裁剪的图片模糊  位置不对的问题 canvasT = (_this.cutT / _this.cropperH) * (_this.imageH / pixelRatio)</span>
					<span class="token keyword">var</span> canvasW <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>_this<span class="token punctuation">.</span>cropperW <span class="token operator">-</span> _this<span class="token punctuation">.</span>cutL <span class="token operator">-</span> _this<span class="token punctuation">.</span>cutR<span class="token punctuation">)</span> <span class="token operator">/</span> _this<span class="token punctuation">.</span>cropperW<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">IMG_REAL_W</span><span class="token punctuation">;</span>
					<span class="token keyword">var</span> canvasH <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>_this<span class="token punctuation">.</span>cropperH <span class="token operator">-</span> _this<span class="token punctuation">.</span>cutT <span class="token operator">-</span> _this<span class="token punctuation">.</span>cutB<span class="token punctuation">)</span> <span class="token operator">/</span> _this<span class="token punctuation">.</span>cropperH<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">IMG_REAL_H</span><span class="token punctuation">;</span>
					<span class="token keyword">var</span> canvasL <span class="token operator">=</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>cutL <span class="token operator">/</span> _this<span class="token punctuation">.</span>cropperW<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">IMG_REAL_W</span><span class="token punctuation">;</span>
					<span class="token keyword">var</span> canvasT <span class="token operator">=</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>cutT <span class="token operator">/</span> _this<span class="token punctuation">.</span>cropperH<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">IMG_REAL_H</span><span class="token punctuation">;</span>
					uni<span class="token punctuation">.</span><span class="token function">canvasToTempFilePath</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
						x<span class="token punctuation">:</span> canvasL<span class="token punctuation">,</span>
						y<span class="token punctuation">:</span> canvasT<span class="token punctuation">,</span>
						width<span class="token punctuation">:</span> canvasW<span class="token punctuation">,</span>
						height<span class="token punctuation">:</span> canvasH<span class="token punctuation">,</span>
						destWidth<span class="token punctuation">:</span> canvasW<span class="token punctuation">,</span>
						destHeight<span class="token punctuation">:</span> canvasH<span class="token punctuation">,</span>
						quality<span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
						canvasId<span class="token punctuation">:</span> <span class="token string">'myCanvas'</span><span class="token punctuation">,</span>
						<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token comment">// 成功获得地址的地方</span>
							<span class="token keyword">var</span> tempFacePath <span class="token operator">=</span> res<span class="token punctuation">.</span>tempFilePath<span class="token punctuation">;</span>
						
							<span class="token comment">// 截取到新的像以后，就进行上传</span>
								uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
									mask<span class="token punctuation">:</span> <span class="token boolean">true</span>
								<span class="token punctuation">}</span><span class="token punctuation">)</span>
								
								uni<span class="token punctuation">.</span><span class="token function">uploadFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
								url<span class="token punctuation">:</span> _this<span class="token punctuation">.</span>serverUrl <span class="token operator">+</span> <span class="token string">'/user/uploadFace?userId='</span> <span class="token operator">+</span> _this<span class="token punctuation">.</span>globalUser<span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">'&amp;qq=466481615'</span><span class="token punctuation">,</span>
								filePath<span class="token punctuation">:</span> tempFacePath<span class="token punctuation">,</span>
								header<span class="token punctuation">:</span> <span class="token punctuation">{</span>
									<span class="token string">&quot;headerUserId&quot;</span><span class="token punctuation">:</span> _this<span class="token punctuation">.</span>globalUser<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
									<span class="token string">&quot;headerUserToken&quot;</span><span class="token punctuation">:</span> _this<span class="token punctuation">.</span>globalUser<span class="token punctuation">.</span>userUniqueToken
								<span class="token punctuation">}</span><span class="token punctuation">,</span>
								name<span class="token punctuation">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
								<span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
									<span class="token comment">// 注意，这里获得是一个string，需要转换一下</span>
									<span class="token keyword">var</span> resDataStr <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
									<span class="token keyword">var</span> resData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>resDataStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
									
									<span class="token keyword">if</span> <span class="token punctuation">(</span>resData<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
										<span class="token keyword">var</span> userInfo <span class="token operator">=</span> resData<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
										uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">'globalUser'</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
										uni<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
											delta<span class="token punctuation">:</span> <span class="token number">1</span>
										<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>resData<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">500</span> <span class="token operator">||</span> resData<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">502</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
											title<span class="token punctuation">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">,</span>
											image<span class="token punctuation">:</span> <span class="token string">&quot;../../static/icos/error.png&quot;</span><span class="token punctuation">,</span>
											duration<span class="token punctuation">:</span> <span class="token number">2000</span>
										<span class="token punctuation">}</span><span class="token punctuation">)</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span><span class="token punctuation">,</span>
								<span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// 设置大小的时候触发的touchStart事件</span>
			<span class="token function">dragStart</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token constant">T_PAGE_X</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageX
				<span class="token constant">T_PAGE_Y</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageY
				<span class="token constant">CUT_L</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cutL
				<span class="token constant">CUT_R</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cutR
				<span class="token constant">CUT_B</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cutB
				<span class="token constant">CUT_T</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cutT
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// 设置大小的时候触发的touchMove事件</span>
			<span class="token function">dragMove</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
				<span class="token keyword">var</span> dragType <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>drag
				<span class="token keyword">switch</span> <span class="token punctuation">(</span>dragType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">case</span> <span class="token string">'right'</span><span class="token punctuation">:</span>
						<span class="token keyword">var</span> dragLength <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">T_PAGE_X</span> <span class="token operator">-</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageX<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">DRAFG_MOVE_RATIO</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">CUT_R</span> <span class="token operator">+</span> dragLength <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> dragLength <span class="token operator">=</span> <span class="token operator">-</span><span class="token constant">CUT_R</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
							cutR<span class="token punctuation">:</span> <span class="token constant">CUT_R</span> <span class="token operator">+</span> dragLength
						<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token keyword">case</span> <span class="token string">'left'</span><span class="token punctuation">:</span>
						<span class="token keyword">var</span> dragLength <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">T_PAGE_X</span> <span class="token operator">-</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageX<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">DRAFG_MOVE_RATIO</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">CUT_L</span> <span class="token operator">-</span> dragLength <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> dragLength <span class="token operator">=</span> <span class="token constant">CUT_L</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">CUT_L</span> <span class="token operator">-</span> dragLength<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cropperW <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cutR<span class="token punctuation">)</span><span class="token punctuation">)</span> dragLength <span class="token operator">=</span> <span class="token constant">CUT_L</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cropperW <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cutR<span class="token punctuation">)</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
							cutL<span class="token punctuation">:</span> <span class="token constant">CUT_L</span> <span class="token operator">-</span> dragLength
						<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token keyword">case</span> <span class="token string">'top'</span><span class="token punctuation">:</span>
						<span class="token keyword">var</span> dragLength <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">T_PAGE_Y</span> <span class="token operator">-</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageY<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">DRAFG_MOVE_RATIO</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">CUT_T</span> <span class="token operator">-</span> dragLength <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> dragLength <span class="token operator">=</span> <span class="token constant">CUT_T</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">CUT_T</span> <span class="token operator">-</span> dragLength<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cropperH <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cutB<span class="token punctuation">)</span><span class="token punctuation">)</span> dragLength <span class="token operator">=</span> <span class="token constant">CUT_T</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cropperH <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cutB<span class="token punctuation">)</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
							cutT<span class="token punctuation">:</span> <span class="token constant">CUT_T</span> <span class="token operator">-</span> dragLength
						<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token keyword">case</span> <span class="token string">'bottom'</span><span class="token punctuation">:</span>
						<span class="token keyword">var</span> dragLength <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">T_PAGE_Y</span> <span class="token operator">-</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageY<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">DRAFG_MOVE_RATIO</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">CUT_B</span> <span class="token operator">+</span> dragLength <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> dragLength <span class="token operator">=</span> <span class="token operator">-</span><span class="token constant">CUT_B</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
							cutB<span class="token punctuation">:</span> <span class="token constant">CUT_B</span> <span class="token operator">+</span> dragLength
						<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token keyword">case</span> <span class="token string">'rightBottom'</span><span class="token punctuation">:</span>
						<span class="token keyword">var</span> dragLengthX <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">T_PAGE_X</span> <span class="token operator">-</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageX<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">DRAFG_MOVE_RATIO</span>
						<span class="token keyword">var</span> dragLengthY <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">T_PAGE_Y</span> <span class="token operator">-</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageY<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">DRAFG_MOVE_RATIO</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">CUT_B</span> <span class="token operator">+</span> dragLengthY <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> dragLengthY <span class="token operator">=</span> <span class="token operator">-</span><span class="token constant">CUT_B</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">CUT_R</span> <span class="token operator">+</span> dragLengthX <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> dragLengthX <span class="token operator">=</span> <span class="token operator">-</span><span class="token constant">CUT_R</span>
						<span class="token keyword">let</span> cutB <span class="token operator">=</span> <span class="token constant">CUT_B</span> <span class="token operator">+</span> dragLengthY<span class="token punctuation">;</span>
						<span class="token keyword">let</span> cutR <span class="token operator">=</span> <span class="token constant">CUT_R</span> <span class="token operator">+</span> dragLengthX<span class="token punctuation">;</span>

						<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
							cutB<span class="token punctuation">:</span> cutB<span class="token punctuation">,</span>
							cutR<span class="token punctuation">:</span> cutR
						<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token keyword">default</span><span class="token punctuation">:</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
	<span class="token atrule"><span class="token rule">@import</span> <span class="token string">&quot;faceCrop.css&quot;</span><span class="token punctuation">;</span></span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 调用组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
uni<span class="token punctuation">.</span><span class="token function">showActionSheet</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  itemList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'查看我的头像'</span><span class="token punctuation">,</span> <span class="token string">'从相册选择上传'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token keyword">var</span> index <span class="token operator">=</span> res<span class="token punctuation">.</span>tapIndex<span class="token punctuation">;</span>
  	<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  		<span class="token comment">// 预览头像</span>
  		<span class="token keyword">var</span> faceArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  		faceArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>globalUser<span class="token punctuation">.</span>faceImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
  		uni<span class="token punctuation">.</span><span class="token function">previewImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  			urls<span class="token punctuation">:</span> faceArr<span class="token punctuation">,</span>
  			current<span class="token punctuation">:</span> faceArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  		<span class="token comment">// 选择上传头像</span>
  		uni<span class="token punctuation">.</span><span class="token function">chooseImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  			count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  			sizeType<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'compressed'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  			sourceType<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'album'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  			<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  				<span class="token comment">// 获得临时路径</span>
  				<span class="token keyword">var</span> tempFilePath <span class="token operator">=</span> res<span class="token punctuation">.</span>tempFilePaths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  				<span class="token comment">// #ifdef H5</span>
  				uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  					url<span class="token punctuation">:</span> <span class="token string">'../meFace/meFace?tempFilePath='</span> <span class="token operator">+</span> tempFilePath
  				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  				<span class="token comment">// #endif</span>
  				<span class="token comment">// #ifndef H5</span>
  				uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  					url<span class="token punctuation">:</span> <span class="token string">'../faceCrop/faceCrop?tempFilePath='</span> <span class="token operator">+</span> tempFilePath
  				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  				<span class="token comment">// #endif</span>
  			<span class="token punctuation">}</span>
  		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br><span class="line-number">435</span><br><span class="line-number">436</span><br></div></div><h2 id="选择器"><a href="#选择器" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/component/picker" target="_blank" rel="noopener noreferrer">选择器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <ul><li>日期选择器</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page page-fill<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">@submit</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>formSubmitBirthday<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page-block<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">margin-top</span><span class="token punctuation">:</span> 20upx<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picker</span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>date<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dateChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>birthday<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{birthday}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picker</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">form-type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submitBtn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
			
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
		
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				birthday<span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
				globalUser<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> globalUser <span class="token operator">=</span> me<span class="token punctuation">.</span><span class="token function">getGlobalUser</span><span class="token punctuation">(</span><span class="token string">&quot;globalUser&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			me<span class="token punctuation">.</span>globalUser <span class="token operator">=</span> globalUser<span class="token punctuation">;</span>
			me<span class="token punctuation">.</span>birthday <span class="token operator">=</span> globalUser<span class="token punctuation">.</span>birthday<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
			<span class="token function">dateChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>birthday <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">formSubmitBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token keyword">var</span> birthday <span class="token operator">=</span> me<span class="token punctuation">.</span>birthday<span class="token punctuation">;</span>
				
				uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					url<span class="token punctuation">:</span> me<span class="token punctuation">.</span>serverUrl <span class="token operator">+</span> <span class="token string">&quot;/user/modifyUserinfo?qq=466481615&quot;</span><span class="token punctuation">,</span>
					data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						<span class="token string">&quot;userId&quot;</span><span class="token punctuation">:</span> me<span class="token punctuation">.</span>globalUser<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
						<span class="token string">&quot;birthday&quot;</span><span class="token punctuation">:</span> birthday
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					header<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						<span class="token string">&quot;headerUserId&quot;</span><span class="token punctuation">:</span> me<span class="token punctuation">.</span>globalUser<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
						<span class="token string">&quot;headerUserToken&quot;</span><span class="token punctuation">:</span> me<span class="token punctuation">.</span>globalUser<span class="token punctuation">.</span>userUniqueToken
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					method<span class="token punctuation">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
					<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> resData <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
						<span class="token comment">// console.log(typeof(resData));</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>resData<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// 获得最新的用户数据</span>
							<span class="token keyword">var</span> userInfo <span class="token operator">=</span> resData<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
							uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">&quot;globalUser&quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
							uni<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
								delta<span class="token punctuation">:</span> <span class="token number">1</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>resData<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">502</span> <span class="token operator">||</span> resData<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
								title<span class="token punctuation">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">,</span>
								image<span class="token punctuation">:</span> <span class="token string">&quot;../../static/icos/error.png&quot;</span><span class="token punctuation">,</span>
								duration<span class="token punctuation">:</span> <span class="token number">2000</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token comment">/* 页面铺满屏幕 */</span>
<span class="token selector">.page-fill</span> <span class="token punctuation">{</span>
	<span class="token property">width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
	<span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.birth-input</span> <span class="token punctuation">{</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 80upx<span class="token punctuation">;</span>
	<span class="token property">line-height</span><span class="token punctuation">:</span> 40upx<span class="token punctuation">;</span>
	<span class="token property">padding-left</span><span class="token punctuation">:</span> 20upx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.birthday</span> <span class="token punctuation">{</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 80upx<span class="token punctuation">;</span>
	<span class="token property">padding-left</span><span class="token punctuation">:</span> 20upx<span class="token punctuation">;</span>
	<span class="token property">padding-top</span><span class="token punctuation">:</span> 30upx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.submitBtn</span> <span class="token punctuation">{</span>
	<span class="token property">width</span><span class="token punctuation">:</span> 95%<span class="token punctuation">;</span>
	<span class="token property">margin-top</span><span class="token punctuation">:</span> 40upx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br></div></div><h2 id="单项选择器radio-group"><a href="#单项选择器radio-group" aria-hidden="true" class="header-anchor">#</a> <a href="https://uniapp.dcloud.io/component/radio" target="_blank" rel="noopener noreferrer">单项选择器radio-group<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <ul><li>选择性别</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page page-fill<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">@submit</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>formSubmitSex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>page-block<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">margin-top</span><span class="token punctuation">:</span> 20upx<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>radio-group</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>radio-sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sexChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>radio-single<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>radio</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:checked</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sex == 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>男
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>radio-single<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>radio</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:checked</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sex == 0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>女
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>radio-group</span><span class="token punctuation">&gt;</span></span>
				
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">form-type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submitBtn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
			
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
		
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				globalUser<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
				sex<span class="token punctuation">:</span> <span class="token string">&quot;-1&quot;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> globalUser <span class="token operator">=</span> me<span class="token punctuation">.</span><span class="token function">getGlobalUser</span><span class="token punctuation">(</span><span class="token string">&quot;globalUser&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			me<span class="token punctuation">.</span>globalUser <span class="token operator">=</span> globalUser<span class="token punctuation">;</span>
			me<span class="token punctuation">.</span>sex <span class="token operator">=</span> globalUser<span class="token punctuation">.</span>sex<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
			<span class="token function">sexChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">formSubmitSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token keyword">var</span> sex <span class="token operator">=</span> me<span class="token punctuation">.</span>sex<span class="token punctuation">;</span>
				
				uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					url<span class="token punctuation">:</span> me<span class="token punctuation">.</span>serverUrl <span class="token operator">+</span> <span class="token string">&quot;/user/modifyUserinfo?qq=466481615&quot;</span><span class="token punctuation">,</span>
					data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						<span class="token string">&quot;userId&quot;</span><span class="token punctuation">:</span> me<span class="token punctuation">.</span>globalUser<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
						<span class="token string">&quot;sex&quot;</span><span class="token punctuation">:</span> sex
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					header<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						<span class="token string">&quot;headerUserId&quot;</span><span class="token punctuation">:</span> me<span class="token punctuation">.</span>globalUser<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
						<span class="token string">&quot;headerUserToken&quot;</span><span class="token punctuation">:</span> me<span class="token punctuation">.</span>globalUser<span class="token punctuation">.</span>userUniqueToken
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					method<span class="token punctuation">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
					<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> resData <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
						<span class="token comment">// console.log(typeof(resData));</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>resData<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// 获得最新的用户数据</span>
							<span class="token keyword">var</span> userInfo <span class="token operator">=</span> resData<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
							uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">&quot;globalUser&quot;</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
							uni<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
								delta<span class="token punctuation">:</span> <span class="token number">1</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>resData<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">502</span> <span class="token operator">||</span> resData<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
								title<span class="token punctuation">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">,</span>
								image<span class="token punctuation">:</span> <span class="token string">&quot;../../static/icos/error.png&quot;</span><span class="token punctuation">,</span>
								duration<span class="token punctuation">:</span> <span class="token number">2000</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token comment">/* 页面铺满屏幕 */</span>
<span class="token selector">.page-fill</span> <span class="token punctuation">{</span>
	<span class="token property">width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
	<span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.radio-sex</span> <span class="token punctuation">{</span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.radio-single</span> <span class="token punctuation">{</span>
	<span class="token property">padding</span><span class="token punctuation">:</span> 20upx 20upx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.submitBtn</span> <span class="token punctuation">{</span>
	<span class="token property">width</span><span class="token punctuation">:</span> 95%<span class="token punctuation">;</span>
	<span class="token property">margin-top</span><span class="token punctuation">:</span> 40upx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ynzy/yufanBlog/edit/master/docs/HybridApp/Dclound/DcloudAction/超英电影预热项目.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2019-5-8 20:00:42</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/yufanBlog/HybridApp/Dclound/DcloudAction/新项目.html">
          新项目
        </a>
        →
      </span></p></div>  <div class="ValineComment" data-v-6bc5d451><div id="vcomments" data-v-6bc5d451></div></div></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/yufanBlog/assets/js/app.eb102ded.js" defer></script><script src="/yufanBlog/assets/js/2.4f286d14.js" defer></script><script src="/yufanBlog/assets/js/34.89958bce.js" defer></script><script src="/yufanBlog/assets/js/4.143f6645.js" defer></script><script src="/yufanBlog/assets/js/5.42853010.js" defer></script>
  </body>
</html>
