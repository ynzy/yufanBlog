(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{405:function(s,a,e){"use strict";e.r(a);var n=e(5),t=Object(n.a)({},function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h3",{attrs:{id:"背景："}},[e("a",{staticClass:"header-anchor",attrs:{href:"#背景：","aria-hidden":"true"}},[s._v("#")]),s._v(" 背景：")]),s._v(" "),e("p",[s._v("easy-mock 是常用的mock数据网站， 但是随着用户越来越多，easy-mock的接口响应速度有点时候会很慢(也跟本地网络环境有关)，而且接口也不稳定，时不时就挂了。。。")]),s._v(" "),e("h3",{attrs:{id:"需求："}},[e("a",{staticClass:"header-anchor",attrs:{href:"#需求：","aria-hidden":"true"}},[s._v("#")]),s._v(" 需求：")]),s._v(" "),e("p",[s._v("公司里有一台专门搭建内网服务器的机子，供开发者使用，所以想把easy-mock部署到本地，这样接口的稳定性和响应速度得到了保证，而且对团队开发也很有帮助。")]),s._v(" "),e("h3",{attrs:{id:"实施："}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实施：","aria-hidden":"true"}},[s._v("#")]),s._v(" 实施：")]),s._v(" "),e("p",[s._v("首先先看easy-mock本地部署的官方介绍，"),e("a",{attrs:{href:"https://github.com/easy-mock/easy-mock/blob/dev/README.zh-CN.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/easy-mock/easy-mock/blob/dev/README.zh-CN.md"),e("OutboundLink")],1),s._v(".官网介绍的步骤，大致分为以下几步：")]),s._v(" "),e("ol",[e("li",[s._v("安装 node（>=v8.9） & MongoDB（>=v3.4） & Redis（>=v4.0）")]),s._v(" "),e("li",[s._v("安装 easy-mock，更改配置文件")]),s._v(" "),e("li",[s._v("启动 easy-mock，测试项目是否可以正常启动，能的话就可以先 Ctrl + C了")]),s._v(" "),e("li",[s._v("启动 MongoDB 和 Redis")]),s._v(" "),e("li",[s._v("npm run build，然后用 PM2 启动 app.js")])]),s._v(" "),e("h4",{attrs:{id:"_1-先装node"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-先装node","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.先装node")]),s._v(" "),e("p",[s._v("这一步不多讲了，之前有一篇"),e("a",{attrs:{href:"https://ynzy.github.io/2019/02/10/nvm%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%92%8Cnrm%E4%B8%8B%E8%BD%BD%E6%BA%90%E7%AE%A1%E7%90%86/",target:"_blank",rel:"noopener noreferrer"}},[s._v("nvm版本管理和nrm下载源管理"),e("OutboundLink")],1),s._v("讲到了如何安装管理node版本和npm下载源。我用的是8.15.0，已经放到公司服务器上，")]),s._v(" "),e("h4",{attrs:{id:"_2-安装mongodb"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装mongodb","aria-hidden":"true"}},[s._v("#")]),s._v(" 2.安装MongoDB")]),s._v(" "),e("ul",[e("li",[s._v("安装包: 百度链接：https://pan.baidu.com/s/1M7HhtTRW8fE1Oknb0o4TgA  提取码：kz8x")]),s._v(" "),e("li",[e("a",{attrs:{href:"http://baijiahao.baidu.com/s?id=1601512248926547477&wfr=spider&for=pc",target:"_blank",rel:"noopener noreferrer"}},[s._v("win版MongoDB安装教程"),e("OutboundLink")],1)]),s._v(" "),e("li",[s._v("MongoDB配置环境变量里面写的不清楚，我在这里重写下，")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("MONGO_HOME = C:\\Program Files\\MongoDB\\Server\\3.4\\bin\nPath = %MONGO_HOME%\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[s._v("推荐使用可视化工具管理数据库，清晰明了，我现找了一个，全是英文看不懂，但也能凑活用了，如果有更好的希望推荐下。")]),s._v(" "),e("li",[s._v("教程网址"),e("a",{attrs:{href:"https://www.jianshu.com/p/1194de9859d0",target:"_blank",rel:"noopener noreferrer"}},[s._v("Robo 3T,mongoDB可视化工具"),e("OutboundLink")],1)])]),s._v(" "),e("h4",{attrs:{id:"_3-安装redis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装redis","aria-hidden":"true"}},[s._v("#")]),s._v(" 3.安装redis")]),s._v(" "),e("ul",[e("li",[s._v("可以直接从"),e("a",{attrs:{href:"https://redis.io/download",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://redis.io/download"),e("OutboundLink")],1),s._v("下载安装包,解压到根目录下面的 opt 文件夹下， 可以根据自己的需求改动 redis.conf 文件，然后输入命令 redis-server，就可以正常启动 redis 了。上面的百度链接里面也有压缩包。")])]),s._v(" "),e("h4",{attrs:{id:"_4-安装easy-mock"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-安装easy-mock","aria-hidden":"true"}},[s._v("#")]),s._v(" 4.安装easy-mock")]),s._v(" "),e("ul",[e("li",[s._v("最后要安装的就是 easy-mock，git clone 下来，然后 npm install，安装依赖，npm run dev启动项目，config/default.json 可以自定义的配置，当然不配置倒也没关系，easy-mock会自动使用 MongoDB 和 redis，不需要其他操作。easy-mock 会默认启动在 7300 下面，打开服务器的ip+port，查看 easy-mock 是否正常启动，正常启动了说明安装阶段大功告成！")]),s._v(" "),e("li",[s._v("自定义配置:在--config下创建local.json文件,")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n  "port": 7300, //easymock项目启动的端口\n  "host": "0.0.0.0",\n  "pageSize": 30,\n  "proxy": false,\n  "db": "mongodb://localhost/easy-mock", // 不需要自己新建数据库，在启动的easymock新建接口即可\n  "unsplashClientId": "",\n  "redis": {\n    "port": 6379, //redis端口\n    "host": "localhost"\n  },\n  "blackList": {\n    "projects": [], // projectId，例："5a4495e16ef711102113e500"\n    "ips": [] // ip，例："127.0.0.1"\n  },\n  "rateLimit": { // https://github.com/koajs/ratelimit\n    "max": 1000,\n    "duration": 1000\n  },\n  "jwt": {\n    "expire": "14 days",\n    "secret": "shared-secret"\n  },\n  "upload": {\n    "types": [".jpg", ".jpeg", ".png", ".gif", ".json", ".yml", ".yaml"],\n    "size": 5242880,\n    "dir": "../public/upload",\n    "expire": {\n      "types": [".json", ".yml", ".yaml"],\n      "day": -1\n    }\n  },\n  "fe": {\n    "copyright": "",\n    "storageNamespace": "easy-mock_",\n    "timeout": 25000,\n    "publicPath": "/dist/"\n  }\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br")])]),e("h4",{attrs:{id:"_5-部署阶段："}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-部署阶段：","aria-hidden":"true"}},[s._v("#")]),s._v(" 5.部署阶段：")]),s._v(" "),e("ol",[e("li",[s._v("全局安装pm2")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install pm2 -g \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("编译easy-mock文件")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm run build\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("启动")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("pm2 start app.js -i 4\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"4"}},[e("li",[s._v("查看")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("pm2 list\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"5"}},[e("li",[s._v("访问ip+port")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("http://192.168.1.6:7300\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("从此再也不用担心easy-mock官网不定时的崩掉了")]),s._v(" "),e("h4",{attrs:{id:"参考网址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考网址","aria-hidden":"true"}},[s._v("#")]),s._v(" 参考网址")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://www.jianshu.com/p/1650c2b9eec9",target:"_blank",rel:"noopener noreferrer"}},[s._v("easy-mock 本地部署过程"),e("OutboundLink")],1),s._v(" "),e("a",{attrs:{href:"https://my.oschina.net/guol/blog/1531704",target:"_blank",rel:"noopener noreferrer"}},[s._v("Easy Mock部署使用"),e("OutboundLink")],1),s._v(" "),e("a",{attrs:{href:"http://www.cnblogs.com/lentoo/p/9539137.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("使用pm2自动化部署node项目"),e("OutboundLink")],1)])])},[],!1,null,null,null);a.default=t.exports}}]);